"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[14],{14:(Q,h,n)=>{n.r(h),n.d(h,{ComentariosPageModule:()=>x});var f=n(6814),l=n(95),a=n(9843),u=n(7564),p=n(5861),c=n(8915),v=n(4664),C=n(6528),Z=n(553),e=n(6689),F=n(2264),b=n(3340),P=n(2425),J=n(930);const T=[{path:"",component:(()=>{var r;class m{constructor(o,i,t,s,g,N,A,U){this.fb=o,this.compress=i,this.sliderRepo=t,this.toast=s,this.genericS=g,this.params=N,this.nav=A,this.modalC=U,this.toolbar=[[{heading:["h1","h2","h3","h4","h5","h6"]}],["bold","italic"],["underline","strike"],["ordered_list","bullet_list"],["align_left","align_center","align_right","align_justify"],["horizontal_rule","format_clear"],["text_color","background_color"]],this.editar=!1,this.uri=Z.N.image+"comentarios/"}ngOnInit(){var o=this;this.editor=new c.ML,this.sliderForm=this.fb.group({puntuacion:[null],persona:[null],empresa:[null],texto:[null]}),this.params.params.pipe((0,v.w)(i=>{var t;return this.identificador=Number(null!==(t=null==i?void 0:i.identificador)&&void 0!==t?t:0),this.sliderRepo.comentario$})).subscribe(function(){var i=(0,p.Z)(function*(t){if(0!==o.identificador){const s=t.find(g=>g.id===o.identificador);o.sliderForm.setValue({puntuacion:s.puntuacion,persona:s.persona,empresa:s.empresa,texto:s.texto}),o.image=o.uri+s.imagen,o.editar=!0}});return function(t){return i.apply(this,arguments)}}())}addImage(){var o=this;return(0,p.Z)(function*(){o.image=yield o.compress.returnImageCompress();const i=yield o.modalC.create({component:C.n,animated:!0,componentProps:{imageUrl:o.image}});i.onDidDismiss().then(({data:t})=>{o.image=null!=t?t:null}),yield i.present()})()}save(){var o=this;return(0,p.Z)(function*(){if(o.editar)return o.edit();const i=new FormData;let t;o.image&&i.append("imagen",o.compress.dataURItoBlob(o.image)),t="string"!=typeof o.sliderForm.controls.texto.value?(0,c.io)(o.sliderForm.controls.texto.value):o.sliderForm.controls.texto.value,i.append("texto",t),i.append("puntuacion",o.sliderForm.controls.puntuacion.value),i.append("persona",o.sliderForm.controls.persona.value),i.append("empresa",o.sliderForm.controls.empresa.value),o.genericS.post("comentarios",i).subscribe(s=>{o.toast.success("Comentario Creado"),o.sliderRepo.addComentario(s),o.image=null,o.sliderForm.reset()})})()}edit(){const o=new FormData;let i;this.image.includes("data:")&&o.append("imagen",this.compress.dataURItoBlob(this.image)),i="string"!=typeof this.sliderForm.controls.texto.value?(0,c.io)(this.sliderForm.controls.texto.value):this.sliderForm.controls.texto.value,o.append("texto",i),o.append("puntuacion",this.sliderForm.controls.puntuacion.value),o.append("persona",this.sliderForm.controls.persona.value),o.append("empresa",this.sliderForm.controls.empresa.value),this.genericS.updateWhitImage("comentarios",this.identificador,o).subscribe(t=>{this.toast.success("Comentario Actualizado"),this.sliderRepo.updateComentario(this.identificador,t),this.image=null,this.sliderForm.reset(),this.nav.navigateBack("/dashboard/website/comentarios-ver")})}calificar(o){this.sliderForm.controls.puntuacion.setValue(o)}}return(r=m).\u0275fac=function(o){return new(o||r)(e.Y36(l.qu),e.Y36(F.Y),e.Y36(b.l),e.Y36(P._W),e.Y36(J.M),e.Y36(u.gz),e.Y36(a.SH),e.Y36(a.IN))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-comentarios"]],decls:30,vars:15,consts:[[3,"fullscreen"],["color","dark",1,"py-2"],[1,"ms-2","ms-md-5","mb-0","titulo"],[1,"palito","ms-2","ms-md-5","mt-0","mb-3"],[1,"container","px-5"],[3,"formGroup"],["lines","none"],["slot","start","shape","round",3,"click"],["slot","end",2,"height","150px","width","150px"],[3,"src"],["type","text","label","Nombre de la persona","labelPlacement","floating","formControlName","persona",1,"my-2","border"],["type","text","label","Nombre de la empresa","labelPlacement","floating","formControlName","empresa",1,"my-2","border"],[1,"NgxEditor__Wrapper"],[3,"toolbar","editor"],["formControlName","texto",3,"editor","placeholder"],["color","primary","slot","end",3,"name","click"],["expand","block","shape","round",3,"disabled","click"]],template:function(o,i){1&o&&(e.TgZ(0,"ion-content",0),e._UZ(1,"br"),e.TgZ(2,"ion-toolbar",1),e._UZ(3,"br"),e.TgZ(4,"h1",2)(5,"b"),e._uU(6),e.qZA()(),e._UZ(7,"hr",3),e.qZA(),e.TgZ(8,"div",4)(9,"form",5)(10,"ion-item",6)(11,"ion-button",7),e.NdJ("click",function(){return i.addImage()}),e._uU(12," Subir Fotograf\xeda "),e.qZA(),e.TgZ(13,"ion-avatar",8),e._UZ(14,"ion-img",9),e.qZA()(),e._UZ(15,"ion-input",10)(16,"ion-input",11),e.TgZ(17,"div",12),e._UZ(18,"ngx-editor-menu",13)(19,"ngx-editor",14),e.qZA(),e.TgZ(20,"ion-item")(21,"ion-label"),e._uU(22,"Calificaci\xf3n"),e.qZA(),e.TgZ(23,"ion-icon",15),e.NdJ("click",function(){return i.calificar(1)}),e.qZA(),e.TgZ(24,"ion-icon",15),e.NdJ("click",function(){return i.calificar(2)}),e.qZA(),e.TgZ(25,"ion-icon",15),e.NdJ("click",function(){return i.calificar(3)}),e.qZA(),e.TgZ(26,"ion-icon",15),e.NdJ("click",function(){return i.calificar(4)}),e.qZA(),e.TgZ(27,"ion-icon",15),e.NdJ("click",function(){return i.calificar(5)}),e.qZA()(),e.TgZ(28,"ion-button",16),e.NdJ("click",function(){return i.save()}),e._uU(29),e.qZA()()()()),2&o&&(e.Q6J("fullscreen",!0),e.xp6(6),e.hij(" ",i.editar?"Editar":"Crear"," Comentario"),e.xp6(3),e.Q6J("formGroup",i.sliderForm),e.xp6(5),e.Q6J("src",i.image),e.xp6(4),e.Q6J("toolbar",i.toolbar)("editor",i.editor),e.xp6(1),e.Q6J("editor",i.editor)("placeholder","Descripci\xf3n del evento"),e.xp6(4),e.Q6J("name",i.sliderForm.controls.puntuacion.value>=1?"star":"star-outline"),e.xp6(1),e.Q6J("name",i.sliderForm.controls.puntuacion.value>=2?"star":"star-outline"),e.xp6(1),e.Q6J("name",i.sliderForm.controls.puntuacion.value>=3?"star":"star-outline"),e.xp6(1),e.Q6J("name",i.sliderForm.controls.puntuacion.value>=4?"star":"star-outline"),e.xp6(1),e.Q6J("name",i.sliderForm.controls.puntuacion.value>=5?"star":"star-outline"),e.xp6(1),e.Q6J("disabled",!i.image),e.xp6(1),e.hij(" ",i.editar?"Guardar Cambios":"Crear Comentario"," "))},dependencies:[l._Y,l.JJ,l.JL,a.BJ,a.YG,a.W2,a.gu,a.Xz,a.pK,a.Ie,a.Q$,a.sr,a.j9,c.tP,c.Mn,l.sg,l.u]}),m})()}];let y=(()=>{var r;class m{}return(r=m).\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[u.Bz.forChild(T),u.Bz]}),m})(),x=(()=>{var r;class m{}return(r=m).\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[f.ez,l.u5,a.Pc,c.FP,l.UX,y]}),m})()}}]);