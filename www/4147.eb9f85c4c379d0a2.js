"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4147],{4147:(T,g,t)=>{t.r(g),t.d(g,{ComisionesPageModule:()=>J});var h=t(6814),a=t(95),r=t(9843),c=t(7564),u=t(5861),f=t(4664),v=t(553),i=t(6689),C=t(2264),b=t(1561),F=t(2425),P=t(930);const Z=[{path:"",component:(()=>{var s;class l{constructor(e,o,n,d,p,U,M){this.fb=e,this.compress=o,this.sliderRepo=n,this.toast=d,this.genericS=p,this.params=U,this.nav=M,this.editar=!1,this.uri=v.N.image+"comisiones/"}ngOnInit(){var e=this;this.sliderForm=this.fb.group({texto:[null],url:[null]}),this.params.params.pipe((0,f.w)(o=>{var n;return this.identificador=Number(null!==(n=null==o?void 0:o.identificador)&&void 0!==n?n:0),this.sliderRepo.comisiones$})).subscribe(function(){var o=(0,u.Z)(function*(n){if(0!==e.identificador){const d=n.find(p=>p.id===e.identificador);e.sliderForm.setValue({texto:d.texto,url:d.url}),e.image=e.uri+d.imagen,e.editar=!0}});return function(n){return o.apply(this,arguments)}}())}addImage(){var e=this;return(0,u.Z)(function*(){e.image=yield e.compress.returnImageCompress()})()}save(){var e=this;return(0,u.Z)(function*(){if(e.editar)return e.edit();const o=new FormData;e.image&&o.append("imagen",e.compress.dataURItoBlob(e.image)),o.append("texto",e.sliderForm.controls.texto.value),o.append("url",e.sliderForm.controls.url.value),e.genericS.post("comisiones",o).subscribe(n=>{e.toast.success("Comisi\xf3n Creado"),e.sliderRepo.addComisiones(n),e.image=null,e.sliderForm.reset()})})()}edit(){const e=new FormData;this.image.includes("data:")&&e.append("imagen",this.compress.dataURItoBlob(this.image)),e.append("texto",this.sliderForm.controls.texto.value),e.append("url",this.sliderForm.controls.url.value),this.genericS.updateWhitImage("comisiones",this.identificador,e).subscribe(o=>{this.toast.success("Comisi\xf3n Actualizado"),this.sliderRepo.updateComisiones(this.identificador,o),this.image=null,this.sliderForm.reset(),this.nav.navigateBack("/dashboard/website/comisiones-ver")})}calificar(e){this.sliderForm.controls.puntuacion.setValue(e)}}return(s=l).\u0275fac=function(e){return new(e||s)(i.Y36(a.qu),i.Y36(C.Y),i.Y36(b.g),i.Y36(F._W),i.Y36(P.M),i.Y36(c.gz),i.Y36(r.SH))},s.\u0275cmp=i.Xpm({type:s,selectors:[["app-comisiones"]],decls:19,vars:6,consts:[[3,"fullscreen"],["color","dark",1,"py-2"],[1,"ms-2","ms-md-5","mb-0","titulo"],[1,"palito","ms-2","ms-md-5","mt-0","mb-3"],[1,"container","px-5"],[3,"formGroup"],["lines","none"],["slot","start","shape","round",3,"click"],["slot","end",2,"height","150px","width","150px"],[3,"src"],["type","text","label","Nombre de la comisi\xf3n","labelPlacement","floating","formControlName","texto",1,"my-2","border"],["type","text","label","Url de redireccionamiento","labelPlacement","floating","formControlName","url",1,"my-2","border"],["expand","block","shape","round",3,"disabled","click"]],template:function(e,o){1&e&&(i.TgZ(0,"ion-content",0),i._UZ(1,"br"),i.TgZ(2,"ion-toolbar",1),i._UZ(3,"br"),i.TgZ(4,"h1",2)(5,"b"),i._uU(6),i.qZA()(),i._UZ(7,"hr",3),i.qZA(),i.TgZ(8,"div",4)(9,"form",5)(10,"ion-item",6)(11,"ion-button",7),i.NdJ("click",function(){return o.addImage()}),i._uU(12," Subir Fotograf\xeda "),i.qZA(),i.TgZ(13,"ion-avatar",8),i._UZ(14,"ion-img",9),i.qZA()(),i._UZ(15,"ion-input",10)(16,"ion-input",11),i.TgZ(17,"ion-button",12),i.NdJ("click",function(){return o.save()}),i._uU(18),i.qZA()()()()),2&e&&(i.Q6J("fullscreen",!0),i.xp6(6),i.hij(" ",o.editar?"Editar":"Crear"," Comisi\xf3n"),i.xp6(3),i.Q6J("formGroup",o.sliderForm),i.xp6(5),i.Q6J("src",o.image),i.xp6(3),i.Q6J("disabled",!o.image),i.xp6(1),i.hij(" ",o.editar?"Guardar Cambios":"Crear Comisi\xf3n"," "))},dependencies:[a._Y,a.JJ,a.JL,r.BJ,r.YG,r.W2,r.Xz,r.pK,r.Ie,r.sr,r.j9,a.sg,a.u],styles:["ion-icon[_ngcontent-%COMP%]{cursor:pointer}"]}),l})()}];let x=(()=>{var s;class l{}return(s=l).\u0275fac=function(e){return new(e||s)},s.\u0275mod=i.oAB({type:s}),s.\u0275inj=i.cJS({imports:[c.Bz.forChild(Z),c.Bz]}),l})();var y=t(8915);let J=(()=>{var s;class l{}return(s=l).\u0275fac=function(e){return new(e||s)},s.\u0275mod=i.oAB({type:s}),s.\u0275inj=i.cJS({imports:[h.ez,a.u5,r.Pc,y.FP,x,a.UX]}),l})()}}]);