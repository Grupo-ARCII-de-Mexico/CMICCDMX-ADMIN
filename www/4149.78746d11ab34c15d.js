"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4149],{4149:(Y,Z,a)=>{a.r(Z),a.d(Z,{VerApoyoPageModule:()=>N});var x=a(6814),P=a(95),c=a(9843),g=a(7564),p=a(5861),A=a(6676),C=a(553),m=a(1486),o=a(6689),V=a(4433),b=a(7153),U=a(2425),M=a(930),E=a(2051);function J(r,d){if(1&r){const l=o.EpF();o.TgZ(0,"tr")(1,"th",13),o._UZ(2,"ion-img",14),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td")(6,"ion-buttons",15)(7,"ion-button",16),o.NdJ("click",function(){const s=o.CHM(l).$implicit,i=o.oxw();return o.KtG(i.vistaPrevia(s.id))}),o._UZ(8,"ion-icon",17),o.qZA(),o.TgZ(9,"ion-button",18),o._UZ(10,"ion-icon",19),o.qZA(),o.TgZ(11,"ion-button",16),o.NdJ("click",function(){const s=o.CHM(l).$implicit,i=o.oxw();return o.KtG(i.exportToExcel(s.id))}),o._UZ(12,"ion-icon",20),o.qZA(),o.TgZ(13,"ion-button",18),o._UZ(14,"ion-icon",21),o.qZA(),o.TgZ(15,"ion-button",16),o.NdJ("click",function(){const s=o.CHM(l).$implicit,i=o.oxw();return o.KtG(i.deleteEvento(s.id))}),o._UZ(16,"ion-icon",22),o.qZA(),o.TgZ(17,"ion-button",16),o.NdJ("click",function(){const s=o.CHM(l).$implicit,i=o.oxw();return o.KtG(i.cerrarEvento(s.id))}),o._UZ(18,"ion-icon",23),o.qZA()()()()}if(2&r){const l=d.$implicit,e=o.oxw();o.xp6(2),o.Q6J("src",e.uri+l.imagen),o.xp6(2),o.Oqu(l.titulo),o.xp6(5),o.MGl("routerLink","ver-usuarios/",l.identificador,""),o.xp6(4),o.MGl("routerLink","editar-apoyos/",l.id,"")}}const S=[{path:"",component:(()=>{var r;class d{constructor(e,n,s,i,u,v){this.nav=e,this.alert=n,this.loading=s,this.toast=i,this.genericService=u,this.apoyos=v,this.uri=C.N.image+"apoyos-dn/",this.eventos=[]}ngOnInit(){this.apoyos.user$.subscribe(e=>{this.eventos=e})}mon(e){return A(e).locale("es").format("L")+" "+A(new Date(e)).utc().format("LTS")}vistaPrevia(e){var n=this;return(0,p.Z)(function*(){const s=n.eventos.find(i=>i.id===e);s&&window.open(C.N.host+"apoyo/"+s.identificador,"_blank")})()}exportToExcel(e){const n=this.eventos.find(t=>t.id===e);let s=[];for(let t of null==n?void 0:n.apoyos){var i,u,v,y,f,h;s.push({Nombre:t?null==t?void 0:t.nombre:null!==(i=null==t?void 0:t.nombre)&&void 0!==i?i:"",Cargo:t?null==t?void 0:t.cargo:null!==(u=null==t?void 0:t.cargo)&&void 0!==u?u:"",Empresa:t?null==t?void 0:t.empresa:null!==(v=null==t?void 0:t.empresa)&&void 0!==v?v:"",Correo:t?null==t?void 0:t.email:null!==(y=null==t?void 0:t.email)&&void 0!==y?y:"",Tel\u00e9fono:t?null==t?void 0:t.telefono:null!==(f=null==t?void 0:t.telefono)&&void 0!==f?f:"",RFC:t?null==t?void 0:t.rfc:null!==(h=null==t?void 0:t.rfc)&&void 0!==h?h:""})}if(s){const t=m.P6.json_to_sheet(s),T=m.P6.book_new();m.P6.book_append_sheet(T,t,"Sheet1"),m.NC(T,(null==n?void 0:n.titulo.toUpperCase())+".xlsx")}}deleteEvento(e){var n=this;return(0,p.Z)(function*(){var s;yield n.alert.setData({animated:!0,header:"Est\xe1 a punto de eliminar este Apoyo",message:"Si lo elimina se perder\xe1n todos los datos relacionados. \n \xbfDesea continuar?",buttons:[{text:"Cancelar"},{text:"Confirmar",handler:(s=(0,p.Z)(function*(){n.loading.setData({animated:!0,message:"Eliminando",spinner:"dots"}),yield n.loading.create(),yield n.loading.show(),n.genericService.delete("desastres",e).subscribe(function(){var i=(0,p.Z)(function*(u){yield n.loading.hide(),n.toast.success("Evento Eliminado"),n.apoyos.deleteApoyo(e)});return function(u){return i.apply(this,arguments)}}())}),function(){return s.apply(this,arguments)})}]})})()}cerrarEvento(e){var n=this;return(0,p.Z)(function*(){var s;yield n.alert.setData({animated:!0,header:"Cerrar Apoyo",message:"Est\xe1 a punto de cerrar el Apoyo una vez lo haga no podr\xe1 reabrilo \xbfDesea Continuar?",buttons:[{text:"Cancelar"},{text:"Cerrar",handler:(s=(0,p.Z)(function*(){n.genericService.update("desastres",e,{active:!1}).subscribe(i=>{n.eventos=n.eventos.map(u=>u.id===e?i:u),n.toast.success("Apoyo Cerrado")})}),function(){return s.apply(this,arguments)})}]})})()}people(e){return(0,p.Z)(function*(){})()}}return(r=d).\u0275fac=function(e){return new(e||r)(o.Y36(c.SH),o.Y36(V.c),o.Y36(b.b),o.Y36(U._W),o.Y36(M.M),o.Y36(E.d))},r.\u0275cmp=o.Xpm({type:r,selectors:[["app-ver-apoyo"]],decls:23,vars:3,consts:[[3,"fullscreen"],["color","dark",1,"py-2"],[1,"ms-2","ms-md-5","mb-0","titulo"],[1,"palito","ms-2","ms-md-5","mt-0","mb-3"],[1,"px-3"],[1,"container"],[1,"d-flex","mt-1"],["placeholder","Buscar evento","inputmode","text","type","text",1,"ms-auto","me-3","my-0","w-100",3,"debounce"],[1,"table","mt-0"],[1,"red"],["scope","col",1,"red","d-none","d-md-block"],["scope","col",1,"red"],[4,"ngFor","ngForOf"],["scope","row",1,"text-center","d-none","d-md-block"],[1,"img-fluid",3,"src"],["color","primary","slot","start"],["color","primary",3,"click"],["slot","icon-only","name","eye-outline"],["color","primary",3,"routerLink"],["slot","icon-only","name","people-outline"],["slot","icon-only","name","download-outline"],["slot","icon-only","name","create-outline"],["slot","icon-only","name","trash-outline"],["slot","icon-only","name","close-outline"]],template:function(e,n){1&e&&(o.TgZ(0,"ion-content",0),o._UZ(1,"br"),o.TgZ(2,"ion-toolbar",1),o._UZ(3,"br"),o.TgZ(4,"h1",2)(5,"b"),o._uU(6," Apoyos"),o.qZA()(),o._UZ(7,"hr",3),o.qZA(),o.TgZ(8,"div",4)(9,"div",5)(10,"div",6),o._UZ(11,"ion-searchbar",7),o.qZA(),o.TgZ(12,"table",8)(13,"thead",9)(14,"tr")(15,"th",10),o._uU(16,"Foto"),o.qZA(),o.TgZ(17,"th",11),o._uU(18,"Titulo"),o.qZA(),o.TgZ(19,"th",11),o._uU(20,"Opciones"),o.qZA()()(),o.TgZ(21,"tbody"),o.YNc(22,J,19,4,"tr",12),o.qZA()()()()()),2&e&&(o.Q6J("fullscreen",!0),o.xp6(11),o.Q6J("debounce",250),o.xp6(11),o.Q6J("ngForOf",n.eventos))},dependencies:[x.sg,c.YG,c.Sm,c.W2,c.gu,c.Xz,c.VI,c.sr,c.j9,c.YI,g.rH],styles:[".img-fluid[_ngcontent-%COMP%]{max-width:200px}.red[_ngcontent-%COMP%]{background-color:var(--ion-color-primary);color:#fff}"]}),d})()}];let F=(()=>{var r;class d{}return(r=d).\u0275fac=function(e){return new(e||r)},r.\u0275mod=o.oAB({type:r}),r.\u0275inj=o.cJS({imports:[g.Bz.forChild(S),g.Bz]}),d})(),N=(()=>{var r;class d{}return(r=d).\u0275fac=function(e){return new(e||r)},r.\u0275mod=o.oAB({type:r}),r.\u0275inj=o.cJS({imports:[x.ez,P.u5,c.Pc,F]}),d})()}}]);