"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[455],{455:(_,b,l)=>{l.r(b),l.d(b,{CrearBolsaPageModule:()=>N});var Z=l(6814),u=l(95),n=l(9843),v=l(7564),p=l(5861),t=l(8915),h=l(4664),T=l(9397),y=l(6528),C=l(553),e=l(6689),U=l(2425),x=l(7153),P=l(7115),q=l(930),F=l(2264);function k(a,d){if(1&a&&e._UZ(0,"ion-img",32),2&a){const s=e.oxw();e.Q6J("src",s.img)}}function A(a,d){if(1&a&&e._UZ(0,"ion-img",32),2&a){const s=e.oxw();e.Q6J("src",s.uri+s.imagen)}}const B=[{path:"",component:(()=>{var a;class d{constructor(o,i,r,g,c,f,m,Y,S){this.fb=o,this.toast=i,this.load=r,this.bolsaRepo=g,this.genericService=c,this.activeParams=f,this.nav=m,this.compressService=Y,this.modalC=S,this.uri=C.N.image+"bolsa-trabajo-logos/",this.edit=!1,this.toolbar=[[{heading:["h1","h2","h3","h4","h5","h6"]}],["bold","italic"],["underline","strike"],["ordered_list","bullet_list"],["align_left","align_center","align_right","align_justify"],["horizontal_rule","format_clear"],["text_color","background_color"]]}ngOnInit(){this.editor=new t.ML,this.bolsaForm=this.fb.group({descripcion:[null,t.kI.required],titulo:[null,t.kI.required],espacio:[null,t.kI.required],tipoContratacion:[null,t.kI.required],vigencia:[null,t.kI.required],estado:[null,t.kI.required],municipio:[null,t.kI.required],delegacion:[null],mostrarSalario:[!1,t.kI.required],puestoDeseado:[null,t.kI.required],escolaridad:[null,t.kI.required],edad:[null,t.kI.required],estadoCivil:[null,t.kI.required],salario:[null,t.kI.required],tareas:[null,t.kI.required],prestaciones:[null,t.kI.required]}),this.activeParams.params.pipe((0,h.w)(o=>(this.identificador=o.identificador,o.identificador&&(this.edit=!0),this.bolsaRepo.BolsaTrabajo$)),(0,T.b)(o=>{if(this.edit){const i=o.find(r=>r.id===Number(this.identificador));i&&(this.imagen=i.foto,this.bolsaForm.setValue({descripcion:i.descripcion,titulo:i.titulo,espacio:i.espacio,tipoContratacion:i.tipoContratacion,vigencia:i.vigencia,estado:i.estado,municipio:i.municipio,delegacion:i.delegacion,mostrarSalario:i.mostrarSalario,puestoDeseado:i.puestoDeseado,escolaridad:i.escolaridad,edad:i.edad,estadoCivil:i.estadoCivil,salario:i.salario,tareas:i.tareas,prestaciones:i.prestaciones}))}})).subscribe()}save(){var o=this;return(0,p.Z)(function*(){if(o.edit)return void(yield o.update());yield o.load.setData({animated:!0,spinner:"dots",translucent:!0,message:"Creando Empleo..."}),yield o.load.create(),yield o.load.show();const i=new FormData;for(var r in o.img&&i.append("foto",o.compressService.dataURItoBlob(o.img)),o.bolsaForm.value)o.bolsaForm.value.hasOwnProperty(r)&&"descripcion"!==r&&i.append(r,o.bolsaForm.value[r]);let c;c="string"!=typeof o.bolsaForm.controls.descripcion.value?(0,t.io)(o.bolsaForm.controls.descripcion.value):o.bolsaForm.controls.descripcion.value,i.append("descripcion",c),o.genericService.post("bolsa-trabajo",i).subscribe(function(){var f=(0,p.Z)(function*(m){o.bolsaForm.reset(),o.bolsaRepo.addBolsaTrabajo(m),yield o.load.hide(),o.toast.success("Empleo Guardado"),o.nav.navigateForward("/dashboard/bolsa-trabajo")});return function(m){return f.apply(this,arguments)}}())})()}update(){var o=this;return(0,p.Z)(function*(){yield o.load.setData({animated:!0,spinner:"dots",translucent:!0,message:"Guardando Cambios..."}),yield o.load.create(),yield o.load.show();const i=new FormData;for(var r in o.img&&i.append("foto",o.compressService.dataURItoBlob(o.img)),o.bolsaForm.value)o.bolsaForm.value.hasOwnProperty(r)&&"descripcion"!==r&&i.append(r,o.bolsaForm.value[r]);let c;c="string"!=typeof o.bolsaForm.controls.descripcion.value?(0,t.io)(o.bolsaForm.controls.descripcion.value):o.bolsaForm.controls.descripcion.value,i.append("descripcion",c),o.genericService.update("bolsa-trabajo",Number(o.identificador),i).subscribe(function(){var f=(0,p.Z)(function*(m){o.bolsaForm.reset(),o.bolsaRepo.updateBolsaTrabajo(Number(o.identificador),m),yield o.load.hide(),o.toast.success("Empleo Actualizada"),o.nav.navigateForward("/dashboard/bolsa-trabajo")});return function(m){return f.apply(this,arguments)}}())})()}upload(){var o=this;return(0,p.Z)(function*(){o.img=yield o.compressService.returnImageCompress();const i=yield o.modalC.create({component:y.n,animated:!0,componentProps:{imageUrl:o.img}});i.onDidDismiss().then(({data:r})=>{o.img=null!=r?r:null}),yield i.present()})()}}return(a=d).\u0275fac=function(o){return new(o||a)(e.Y36(u.qu),e.Y36(U._W),e.Y36(x.b),e.Y36(P._),e.Y36(q.M),e.Y36(v.gz),e.Y36(n.SH),e.Y36(F.Y),e.Y36(n.IN))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-crear-bolsa"]],decls:114,vars:6,consts:[[3,"fullscreen"],["color","dark",1,"py-2"],[1,"ms-2","ms-md-5","mb-0","titulo"],[1,"palito","ms-2","ms-md-5","mt-0","mb-3"],[1,"mt-1","px-4"],[3,"formGroup"],["button","",3,"click"],["slot","end","style","width: 300px;","class","my-3",3,"src",4,"ngIf"],["color","danger"],["required","","labelPlacement","stacked","fill","outline","type","text","formControlName","titulo"],["slot","label"],[1,"row"],[1,"col-md-4","my-3"],["required","","placeholder","Oficina","labelPlacement","stacked","fill","outline","type","text","formControlName","espacio"],["required","","labelPlacement","stacked","fill","outline","type","text","formControlName","tipoContratacion"],["display-format","DD.MM.YYYY HH:mm","formControlName","vigencia"],["slot","time-label"],["required","","placeholder","Oficina","labelPlacement","stacked","fill","outline","type","text","formControlName","estado"],["required","","labelPlacement","stacked","fill","outline","type","text","formControlName","municipio"],["labelPlacement","stacked","fill","outline","type","text","formControlName","delegacion"],[1,"col-md-8","my-3"],["required","","labelPlacement","stacked","fill","outline","type","text","formControlName","puestoDeseado"],["required","","labelPlacement","stacked","fill","outline","type","text","formControlName","escolaridad"],["required","","labelPlacement","stacked","fill","outline","type","text","formControlName","edad"],["required","","labelPlacement","stacked","fill","outline","type","text","formControlName","salario"],["required","","labelPlacement","stacked","fill","outline","type","text","formControlName","estadoCivil"],["formControlName","descripcion","labelPlacement","stacked","fill","outline","rows","10",1,"my-3"],["formControlName","tareas","labelPlacement","stacked","fill","outline","rows","10",1,"my-3"],["formControlName","prestaciones","labelPlacement","stacked","fill","outline","rows","10",1,"my-3"],["formControlName","mostrarSalario"],["color","dark"],["expand","block","shape","round",1,"mt-4",3,"disabled","click"],["slot","end",1,"my-3",2,"width","300px",3,"src"]],template:function(o,i){1&o&&(e.TgZ(0,"ion-content",0),e._UZ(1,"br"),e.TgZ(2,"ion-toolbar",1),e._UZ(3,"br"),e.TgZ(4,"h1",2)(5,"b"),e._uU(6),e.qZA()(),e._UZ(7,"hr",3),e.qZA(),e.TgZ(8,"div",4)(9,"form",5)(10,"ion-item",6),e.NdJ("click",function(){return i.upload()}),e.YNc(11,k,1,1,"ion-img",7),e.YNc(12,A,1,1,"ion-img",7),e._UZ(13,"br"),e.TgZ(14,"ion-label"),e._uU(15,"Subir Logo del Empleador "),e.TgZ(16,"ion-text",8),e._uU(17,"*"),e.qZA()()(),e.TgZ(18,"ion-input",9)(19,"div",10),e._uU(20,"Titulo de la oferta "),e.TgZ(21,"ion-text",8),e._uU(22,"*"),e.qZA()()(),e.TgZ(23,"div",11)(24,"div",12)(25,"ion-input",13)(26,"div",10),e._uU(27,"Espacio de Trabajo "),e.TgZ(28,"ion-text",8),e._uU(29,"*"),e.qZA()()()(),e.TgZ(30,"div",12)(31,"ion-input",14)(32,"div",10),e._uU(33,"Tipo de contrataci\xf3n "),e.TgZ(34,"ion-text",8),e._uU(35,"*"),e.qZA()()()(),e.TgZ(36,"div",12)(37,"ion-label"),e._uU(38,"Vigencia de la oferta "),e.TgZ(39,"ion-text",8),e._uU(40,"*"),e.qZA()(),e.TgZ(41,"ion-datetime",15)(42,"span",16),e._uU(43,"Tiempo"),e.qZA()()(),e.TgZ(44,"div",12)(45,"ion-input",17)(46,"div",10),e._uU(47,"Estado "),e.TgZ(48,"ion-text",8),e._uU(49,"*"),e.qZA()()()(),e.TgZ(50,"div",12)(51,"ion-input",18)(52,"div",10),e._uU(53,"Municipio "),e.TgZ(54,"ion-text",8),e._uU(55,"*"),e.qZA()()()(),e.TgZ(56,"div",12)(57,"ion-input",19)(58,"div",10),e._uU(59,"Delegaci\xf3n "),e.qZA()()(),e.TgZ(60,"div",20)(61,"ion-input",21)(62,"div",10),e._uU(63,"Puesto Deseado "),e.TgZ(64,"ion-text",8),e._uU(65,"*"),e.qZA()()()(),e.TgZ(66,"div",12)(67,"ion-input",22)(68,"div",10),e._uU(69,"Escolaridad "),e.TgZ(70,"ion-text",8),e._uU(71,"*"),e.qZA()()()(),e.TgZ(72,"div",12)(73,"ion-input",23)(74,"div",10),e._uU(75,"Edad "),e.TgZ(76,"ion-text",8),e._uU(77,"*"),e.qZA()()()(),e.TgZ(78,"div",12)(79,"ion-input",24)(80,"div",10),e._uU(81,"Salario "),e.TgZ(82,"ion-text",8),e._uU(83,"*"),e.qZA()()()(),e.TgZ(84,"div",12)(85,"ion-input",25)(86,"div",10),e._uU(87,"Estado Civil "),e.TgZ(88,"ion-text",8),e._uU(89,"*"),e.qZA()()()()(),e.TgZ(90,"ion-textarea",26)(91,"div",10),e._uU(92,"Descripci\xf3n del puesto "),e.TgZ(93,"ion-text",8),e._uU(94,"*"),e.qZA()()(),e.TgZ(95,"ion-textarea",27)(96,"div",10),e._uU(97,"Tareas a desempe\xf1ar "),e.TgZ(98,"ion-text",8),e._uU(99,"*"),e.qZA()()(),e.TgZ(100,"ion-textarea",28)(101,"div",10),e._uU(102,"Prestaciones de Ley "),e.TgZ(103,"ion-text",8),e._uU(104,"*"),e.qZA()()(),e._UZ(105,"ion-checkbox",29),e.TgZ(106,"ion-text",30)(107,"p"),e._uU(108,"Mostrar Salario Al P\xfablico"),e.qZA()(),e.TgZ(109,"ion-button",31),e.NdJ("click",function(){return i.save()}),e._uU(110," Guardar "),e.qZA()(),e._UZ(111,"br")(112,"br")(113,"br"),e.qZA()()),2&o&&(e.Q6J("fullscreen",!0),e.xp6(6),e.hij(" ",i.edit?"Editar ":"Crear "," Empleo"),e.xp6(3),e.Q6J("formGroup",i.bolsaForm),e.xp6(2),e.Q6J("ngIf",i.img),e.xp6(1),e.Q6J("ngIf",!i.img&&i.imagen),e.xp6(97),e.Q6J("disabled",i.bolsaForm.invalid))},dependencies:[Z.O5,u._Y,u.JJ,u.JL,u.Q7,u.sg,u.u,n.YG,n.nz,n.W2,n.x4,n.Xz,n.pK,n.Ie,n.Q$,n.yW,n.g2,n.sr,n.w,n.QI,n.j9]}),d})()}];let I=(()=>{var a;class d{}return(a=d).\u0275fac=function(o){return new(o||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[v.Bz.forChild(B),v.Bz]}),d})(),N=(()=>{var a;class d{}return(a=d).\u0275fac=function(o){return new(o||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[Z.ez,u.u5,u.UX,n.Pc,I,t.FP]}),d})()}}]);