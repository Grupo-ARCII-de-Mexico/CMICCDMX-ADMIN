"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4554],{4554:(A,f,n)=>{n.r(f),n.d(f,{DirectorioCrearPageModule:()=>J});var h=n(6814),d=n(95),l=n(9843),m=n(7564),p=n(5861),v=n(4664),e=n(6689),b=n(2264),C=n(8147),y=n(2425),Z=n(930),D=n(7153);function P(t,c){if(1&t&&(e.TgZ(0,"ion-select-option",16),e._uU(1),e.qZA()),2&t){const u=c.$implicit;e.Q6J("value",u.id),e.xp6(1),e.Oqu(u.nombre)}}const T=[{path:"",component:(()=>{var t;class c{constructor(r,o,a,i,s,g,M,R){this.fb=r,this.compress=o,this.depaRepo=a,this.toast=i,this.genericS=s,this.params=g,this.nav=M,this.loading=R,this.editar=!1,this.depa=""}ngOnInit(){var r=this;this.depaForm=this.fb.group({nombre:[null,d.kI.required],correo:[null,d.kI.required],cargo:[null,d.kI.required],departamento:[null,d.kI.required]}),this.params.params.pipe((0,v.w)(o=>{var a;return this.identificador=Number(null!==(a=null==o?void 0:o.id)&&void 0!==a?a:0),this.depaRepo.directorio$})).subscribe(function(){var o=(0,p.Z)(function*(a){if(r.departamentos=a,0!==r.identificador)for(const i of a){const s=i.directorios.find(g=>g.id===r.identificador);if(s){r.depaForm.setValue({nombre:s.nombre,correo:s.correo,cargo:s.cargo,departamento:i.id}),r.editar=!0;break}}});return function(a){return o.apply(this,arguments)}}())}createDepartamento(){var r=this;return(0,p.Z)(function*(){r.loading.setData({animated:!0,message:"Guardando",spinner:"dots"}),yield r.loading.create(),yield r.loading.show(),r.genericS.post("departamento",{nombre:r.depa}).subscribe(function(){var o=(0,p.Z)(function*(a){r.departamentos.push(a),r.depa="",yield r.loading.hide(),r.toast.success("Registro Guardado")});return function(a){return o.apply(this,arguments)}}())})()}save(){var r=this;return(0,p.Z)(function*(){r.editar?yield r.edit():(r.loading.setData({animated:!0,message:"Guardando",spinner:"dots"}),yield r.loading.create(),yield r.loading.show(),r.genericS.post("directorio",r.depaForm.value).subscribe(function(){var o=(0,p.Z)(function*(a){const i=r.departamentos.find(s=>s.id===r.depaForm.controls.departamento.value);i.directorios.push(a),r.depaRepo.updateDepartamento(i.id,{directorios:i.directorios}),yield r.loading.hide(),r.toast.success("Registro Guardado"),r.depaForm.reset()});return function(a){return o.apply(this,arguments)}}()))})()}edit(){var r=this;return(0,p.Z)(function*(){r.loading.setData({animated:!0,message:"Guardando",spinner:"dots"}),yield r.loading.create(),yield r.loading.show(),r.genericS.update("directorio",r.identificador,r.depaForm.value).subscribe(function(){var o=(0,p.Z)(function*(a){let i=r.departamentos.find(s=>s.id===r.depaForm.controls.departamento.value);i.directorios=i.directorios.map(s=>s.id===a.id?a:s),r.depaRepo.updateDepartamento(i.id,{directorios:i.directorios}),yield r.loading.hide(),r.toast.success("Registro Actualizado"),r.depaForm.reset(),r.nav.navigateBack("/dashboard/website/directorio")});return function(a){return o.apply(this,arguments)}}())})()}}return(t=c).\u0275fac=function(r){return new(r||t)(e.Y36(d.qu),e.Y36(b.Y),e.Y36(C.R),e.Y36(y._W),e.Y36(Z.M),e.Y36(m.gz),e.Y36(l.SH),e.Y36(D.b))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-directorio-crear"]],decls:29,vars:8,consts:[[3,"fullscreen"],["color","dark",1,"py-2"],[1,"ms-2","ms-md-5","mb-0","titulo"],[1,"palito","ms-2","ms-md-5","mt-0","mb-3"],[1,"container","px-5"],[1,"row","mt-5"],[1,"col-md-4"],["type","text","label","Nombre del Departamento","labelPlacement","floating",1,"my-2","border",3,"ngModel","ngModelChange"],["expand","block","shape","round",3,"disabled","click"],[1,"col-md-8"],[3,"formGroup"],["type","text","label","Nombre Completo","labelPlacement","floating","formControlName","nombre",1,"my-2","border"],["type","text","label","Correo","labelPlacement","floating","formControlName","correo",1,"my-2","border"],["type","text","label","Cargo","labelPlacement","floating","formControlName","cargo",1,"my-2","border"],["label","Departamento","labelPlacement","stacked","formControlName","departamento"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(r,o){1&r&&(e.TgZ(0,"ion-content",0),e._UZ(1,"br"),e.TgZ(2,"ion-toolbar",1),e._UZ(3,"br"),e.TgZ(4,"h1",2)(5,"b"),e._uU(6),e.qZA()(),e._UZ(7,"hr",3),e.qZA(),e.TgZ(8,"div",4)(9,"div",5)(10,"div",6)(11,"h3")(12,"strong"),e._uU(13,"Crear Departamentos"),e.qZA()(),e.TgZ(14,"ion-input",7),e.NdJ("ngModelChange",function(i){return o.depa=i}),e.qZA(),e.TgZ(15,"ion-button",8),e.NdJ("click",function(){return o.createDepartamento()}),e._uU(16," Guardar Departamento "),e.qZA()(),e.TgZ(17,"div",9)(18,"h3")(19,"strong"),e._uU(20,"Crear Registro En Directorio"),e.qZA()(),e.TgZ(21,"form",10),e._UZ(22,"ion-input",11)(23,"ion-input",12)(24,"ion-input",13),e.TgZ(25,"ion-select",14),e.YNc(26,P,2,2,"ion-select-option",15),e.qZA(),e.TgZ(27,"ion-button",8),e.NdJ("click",function(){return o.save()}),e._uU(28),e.qZA()()()()()()),2&r&&(e.Q6J("fullscreen",!0),e.xp6(6),e.hij(" ",o.editar?"Editar":"Crear"," Registro"),e.xp6(8),e.Q6J("ngModel",o.depa),e.xp6(1),e.Q6J("disabled",0===o.depa.length),e.xp6(6),e.Q6J("formGroup",o.depaForm),e.xp6(5),e.Q6J("ngForOf",o.departamentos),e.xp6(1),e.Q6J("disabled",o.depaForm.invalid),e.xp6(1),e.hij(" ",o.editar?"Guardar Cambios":"Crear Registro"," "))},dependencies:[h.sg,d._Y,d.JJ,d.JL,d.On,l.YG,l.W2,l.pK,l.t9,l.n0,l.sr,l.QI,l.j9,d.sg,d.u]}),c})()}];let F=(()=>{var t;class c{}return(t=c).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.Bz.forChild(T),m.Bz]}),c})(),J=(()=>{var t;class c{}return(t=c).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[h.ez,d.u5,l.Pc,F,d.UX]}),c})()}}]);