"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5746],{5404:(I,P,r)=>{r.d(P,{x:()=>S});var h=r(5861),v=r(9026),f=r(9397),U=r(4664),T=r(4028),e=r(6689),A=r(930),Z=r(95),t=r(2264),C=r(4433),g=r(9843),E=r(1284),O=r(7153),M=r(2425),x=r(6814);function y(d,_){if(1&d&&(e.TgZ(0,"ion-select-option",24),e._uU(1),e.qZA()),2&d){const p=_.$implicit;e.Q6J("value",_.index),e.xp6(1),e.Oqu(p)}}function q(d,_){if(1&d&&(e.TgZ(0,"ion-select-option",24),e._uU(1),e.qZA()),2&d){const p=_.$implicit;e.Q6J("value",null==p?null:p.id),e.xp6(1),e.Oqu(null==p?null:p.ciudad)}}function N(d,_){if(1&d&&(e.TgZ(0,"ion-select-option",24),e._uU(1),e.qZA()),2&d){const p=_.$implicit;e.Q6J("value",p.id),e.xp6(1),e.Oqu(p.nombre)}}function D(d,_){if(1&d&&(e.TgZ(0,"ion-select-option",25),e._uU(1),e.qZA()),2&d){const p=e.oxw(2);e.Q6J("value",null==p.extranjero?null:p.extranjero.id),e.xp6(1),e.Oqu(null==p.extranjero?null:p.extranjero.nombre)}}function J(d,_){if(1&d){const p=e.EpF();e.TgZ(0,"form",5),e.NdJ("ngSubmit",function(){e.CHM(p);const m=e.oxw();return e.KtG(m.update())}),e.TgZ(1,"ion-item")(2,"ion-select",6),e.YNc(3,y,2,2,"ion-select-option",7),e.qZA()(),e.TgZ(4,"ion-item"),e._UZ(5,"ion-input",8),e.qZA(),e.TgZ(6,"ion-item")(7,"ion-input",9)(8,"div",10),e._uU(9,"Nombre Completo "),e.TgZ(10,"ion-text",11),e._uU(11,"*"),e.qZA()()()(),e.TgZ(12,"ion-item")(13,"ion-input",12)(14,"div",10),e._uU(15,"Tel\xe9fono "),e.TgZ(16,"ion-text",11),e._uU(17,"*"),e.qZA()()()(),e.TgZ(18,"ion-item")(19,"ion-input",13)(20,"div",10),e._uU(21,"Correo "),e.TgZ(22,"ion-text",11),e._uU(23,"*"),e.qZA()()()(),e.TgZ(24,"ion-item"),e._UZ(25,"ion-input",14),e.qZA(),e.TgZ(26,"ion-item")(27,"ion-input",15)(28,"div",10),e._uU(29,"Cargo en la empresa "),e._UZ(30,"ion-text",11),e.qZA()()(),e.TgZ(31,"ion-item")(32,"ion-select",16),e.YNc(33,q,2,2,"ion-select-option",7),e.qZA()(),e.TgZ(34,"ion-item"),e._UZ(35,"ion-input",17),e.qZA(),e.TgZ(36,"ion-item")(37,"ion-select",18)(38,"div",10),e._uU(39,"Estado de Origen "),e.qZA(),e.YNc(40,N,2,2,"ion-select-option",7),e.YNc(41,D,2,2,"ion-select-option",19),e.qZA()(),e.TgZ(42,"ion-item"),e._UZ(43,"ion-input",20),e.qZA(),e.TgZ(44,"ion-item"),e._UZ(45,"ion-input",21),e.qZA(),e.TgZ(46,"ion-item")(47,"ion-text"),e._uU(48,"Suba su credencial estudiantil o documento que lo avale "),e._UZ(49,"br"),e.qZA(),e.TgZ(50,"ion-button",22),e.NdJ("click",function(){e.CHM(p);const m=e.oxw();return e.KtG(m.upload())}),e._uU(51," Subir Credencial "),e.qZA()(),e.TgZ(52,"ion-button",23),e._uU(53," Actualizar "),e.qZA()()}if(2&d){const p=e.oxw();e.Q6J("formGroup",p.participanteForm),e.xp6(3),e.Q6J("ngForOf",p.tipoPublicoArray),e.xp6(29),e.Q6J("cancelText","Cerrar"),e.xp6(1),e.Q6J("ngForOf",p.delegaciones),e.xp6(4),e.Q6J("cancelText","Cerrar"),e.xp6(3),e.Q6J("ngForOf",p.estados),e.xp6(1),e.Q6J("ngIf",p.extranjero)}}let S=(()=>{var d;class _{constructor(n,m,i,c,o,a,l,s,u){this.genericS=n,this.fb=m,this.compressService=i,this.alert=c,this.modalC=o,this.boletos=a,this.nav=l,this.load=s,this.toast=u,this.delegaciones=[],this.estados=[],this.tipoPublico=T.L,this.tipoPublicoArray=T.x,this.stripeCosto=0}ngOnInit(){this.stripe(),(0,v.$)(this.genericS.getAll("delegacion"),this.genericS.getAll("estados")).pipe((0,f.b)(n=>{var m,i,c,o,a;this.delegaciones=n[0].sort(function(s,u){return s.ciudad.localeCompare(u.ciudad)}),this.extranjero=n[1].find(s=>33==s.id),this.estados=n[1].filter(s=>33!==s.id).sort(function(s,u){return s.nombre.localeCompare(u.nombre)}),this.participante=this.boleto.participante;const l=null!==(m=null===(i=n[0].find(s=>{var u;return s.ciudad===(null===(u=this.participante)||void 0===u?void 0:u.delegacion)}))||void 0===i?void 0:i.id)&&void 0!==m?m:null;this.participanteForm=this.fb.group({nombre:this.participante.nombre,numAfiliado:this.participante.numAfiliado,telefono:this.participante.telefono,email:this.participante.email,cargo:this.participante.cargo,empresa:this.participante.empresa,curp:this.participante.curp,rfc:this.participante.rfc,organizacion:this.participante.organizacion,estado:null!==(c=null===(o=this.participante)||void 0===o||null===(o=o.estado)||void 0===o?void 0:o.id)&&void 0!==c?c:null,delegacion:l,tipo:null!==(a=Number(this.participante.tipo))&&void 0!==a?a:0})})).subscribe()}upload(){var n=this;return(0,h.Z)(function*(){n.evidencia=yield n.compressService.returnImageCompress()})()}update(){var n=this;return(0,h.Z)(function*(){if(n.load.setData({message:"Actualizando Usuario",animated:!0,spinner:"dots"}),yield n.load.create(),yield n.load.show(),n.participanteForm.controls.delegacion.value){var m,i;const c=null!==(m=n.delegaciones.find(o=>o.id===n.participanteForm.controls.delegacion.value))&&void 0!==m?m:null;n.participanteForm.controls.delegacion.setValue(null!==(i=null==c?void 0:c.ciudad)&&void 0!==i?i:null)}n.genericS.update("participante",n.participante.id,{...n.participanteForm.value}).subscribe(function(){var c=(0,h.Z)(function*(o){yield n.modalC.dismiss(),yield n.load.hide(),n.toast.success("Usuario Actualizado"),n.boletos.updateEvento(n.boleto.id,{participante:o})});return function(o){return c.apply(this,arguments)}}())})()}updateBoleto(){this.genericS.update("boleto",this.boleto.id,this.boleto).subscribe(n=>{this.boletos.updateEvento(n.id,n)})}stripe(){this.boleto.idPago&&this.genericS.post("payments",{idPago:this.boleto.idPago}).subscribe(n=>{this.stripeCosto=n.amount})}pagar(){var n=this;return(0,h.Z)(function*(){var m;yield n.alert.setData({animated:!0,header:"Confirmar Pago",message:"Si confirma el pago se procedera con el proceso de entrega del QR",buttons:[{text:"Cancelar"},{text:"Confirmar",handler:(m=(0,h.Z)(function*(){n.genericS.update("boleto",n.boleto.id,{active:!0}).pipe((0,U.w)(i=>(n.boletos.updateEvento(i.id,i),n.genericS.post("boleto/confirm/"+i.id,{}))),(0,f.b)(i=>{n.toast.success("boleto activado"),n.modalC.dismiss()})).subscribe()}),function(){return m.apply(this,arguments)})}]})})()}}return(d=_).\u0275fac=function(n){return new(n||d)(e.Y36(A.M),e.Y36(Z.qu),e.Y36(t.Y),e.Y36(C.c),e.Y36(g.IN),e.Y36(E.b9),e.Y36(g.SH),e.Y36(O.b),e.Y36(M._W))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-editar-usuario"]],inputs:{boleto:"boleto"},decls:8,vars:3,consts:[[3,"translucent"],["color","primary"],["slot","end","color","tertiary","expand","block",1,"me-2",3,"click"],[3,"fullscreen"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],["label","Tipo de Participante","formControlName","tipo","placeholder","Seleccione"],[3,"value",4,"ngFor","ngForOf"],["labelPlacement","floating","label","No.Afiliado","formControlName","numAfiliado","type","text"],["labelPlacement","floating","formControlName","nombre","type","text"],["slot","label"],["color","danger"],["labelPlacement","floating","formControlName","telefono","type","text"],["labelPlacement","floating","formControlName","email","type","email"],["label","Ingrese el nombre de su empresa","labelPlacement","floating","formControlName","empresa","type","text"],["labelPlacement","floating","formControlName","cargo","type","text"],["label","Delegaci\xf3n CMIC","formControlName","delegacion","okText","Seleccionar","placeholder","Seleccione",3,"cancelText"],["label","Ingrese el nombre de su organizaci\xf3n","labelPlacement","floating","formControlName","organizacion","type","text"],["formControlName","estado","okText","Seleccionar","placeholder","Seleccione",3,"cancelText"],["class","border-top",3,"value",4,"ngIf"],["label","RFC","labelPlacement","floating","formControlName","rfc","type","text"],["label","CURP","labelPlacement","floating","formControlName","curp","type","text"],["expand","block","shape","round",3,"click"],["expand","block","slot","end","shape","round","type","submit",1,"mt-3"],[3,"value"],[1,"border-top",3,"value"]],template:function(n,m){1&n&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title"),e._uU(3,"Editar Participante"),e.qZA(),e.TgZ(4,"ion-button",2),e.NdJ("click",function(){return m.pagar()}),e._uU(5," Confirmar Pago "),e.qZA()()(),e.TgZ(6,"ion-content",3),e.YNc(7,J,54,7,"form",4),e.qZA()),2&n&&(e.Q6J("translucent",!0),e.xp6(6),e.Q6J("fullscreen",!0),e.xp6(1),e.Q6J("ngIf",m.participanteForm))},dependencies:[x.sg,x.O5,Z._Y,Z.JJ,Z.JL,Z.sg,Z.u,g.YG,g.W2,g.Gu,g.pK,g.Ie,g.t9,g.n0,g.yW,g.wd,g.sr,g.QI,g.j9]}),_})()},5746:(I,P,r)=>{r.r(P),r.d(P,{VerUsuariosPageModule:()=>m});var h=r(6814),v=r(95),f=r(9843),U=r(7564),T=r(5861),e=r(6676),A=r(4028),Z=r(5404),t=r(6689),C=r(1284),g=r(8013),E=r(930),O=r(4433),M=r(2425),x=r(7602),y=r(6991);let q=(()=>{var i;class c{transform(a,l){const s=[];if(!l)return a;if(a)for(const b of a){var u;(null==b||null===(u=b.participante)||void 0===u?void 0:u.nombre.toLowerCase().indexOf(l.toLowerCase()))>-1&&s.push(b)}return(0,y.o)(s)}}return(i=c).\u0275fac=function(a){return new(a||i)},i.\u0275pipe=t.Yjl({name:"userSearch",type:i,pure:!0}),c})();function N(i,c){if(1&i){const o=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td")(16,"ion-buttons",12)(17,"ion-button",13),t.NdJ("click",function(){const s=t.CHM(o).$implicit,u=t.oxw(2);return t.KtG(u.edit(s))}),t._UZ(18,"ion-icon",14),t.qZA(),t.TgZ(19,"ion-button",13),t.NdJ("click",function(){const s=t.CHM(o).$implicit,u=t.oxw(2);return t.KtG(u.delete(s.id))}),t._UZ(20,"ion-icon",15),t.qZA()()()()}if(2&i){const o=c.$implicit,a=t.oxw(2);t.xp6(2),t.Oqu(null==o||null==o.participante?null:o.participante.nombre),t.xp6(2),t.Oqu(null==o||null==o.participante?null:o.participante.rfc),t.xp6(2),t.Oqu(null==o||null==o.participante?null:o.participante.telefono),t.xp6(2),t.Oqu(null==o||null==o.participante?null:o.participante.email),t.xp6(2),t.Oqu(a.tipoPubico[null==o||null==o.participante?null:o.participante.tipo]),t.xp6(2),t.Oqu(a.mon(o.createdAt)),t.xp6(2),t.Oqu(o.active?"Pagado":"")}}function D(i,c){if(1&i&&(t.TgZ(0,"table",8)(1,"thead",9)(2,"tr")(3,"th",10),t._uU(4,"Nombre"),t.qZA(),t.TgZ(5,"th",10),t._uU(6,"RFC"),t.qZA(),t.TgZ(7,"th",10),t._uU(8,"Tel\xe9fono"),t.qZA(),t.TgZ(9,"th",10),t._uU(10,"Correo"),t.qZA(),t.TgZ(11,"th",10),t._uU(12,"Role"),t.qZA(),t.TgZ(13,"th",10),t._uU(14,"Fecha de Registro"),t.qZA(),t.TgZ(15,"th",10),t._uU(16,"Estatus"),t.qZA(),t.TgZ(17,"th",10),t._uU(18,"Opciones"),t.qZA()()(),t.TgZ(19,"tbody"),t.YNc(20,N,21,7,"tr",11),t.ALo(21,"userSearch"),t.qZA()()),2&i){const o=t.oxw();t.xp6(20),t.Q6J("ngForOf",t.xi3(21,1,o.boletos,o.search))}}function J(i,c){if(1&i){const o=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td")(16,"ion-buttons",12)(17,"ion-button",13),t.NdJ("click",function(){const s=t.CHM(o).$implicit,u=t.oxw(2);return t.KtG(u.edit(s))}),t._UZ(18,"ion-icon",14),t.qZA(),t.TgZ(19,"ion-button",13),t.NdJ("click",function(){const s=t.CHM(o).$implicit,u=t.oxw(2);return t.KtG(u.delete(s.id))}),t._UZ(20,"ion-icon",15),t.qZA()()()()}if(2&i){const o=c.$implicit,a=t.oxw(2);t.xp6(2),t.Oqu(null==o||null==o.participante?null:o.participante.nombre),t.xp6(2),t.Oqu(null==o||null==o.participante?null:o.participante.rfc),t.xp6(2),t.Oqu(null==o||null==o.participante?null:o.participante.telefono),t.xp6(2),t.Oqu(null==o||null==o.participante?null:o.participante.email),t.xp6(2),t.Oqu(a.tipoPubico[o.participante.tipo]),t.xp6(2),t.Oqu(a.mon(o.participante.createdAt)),t.xp6(2),t.Oqu(o.active?"Pagado":"")}}function S(i,c){if(1&i&&(t.TgZ(0,"table",8)(1,"thead",9)(2,"tr")(3,"th",10),t._uU(4,"Nombre"),t.qZA(),t.TgZ(5,"th",10),t._uU(6,"RFC"),t.qZA(),t.TgZ(7,"th",10),t._uU(8,"Tel\xe9fono"),t.qZA(),t.TgZ(9,"th",10),t._uU(10,"Correo"),t.qZA(),t.TgZ(11,"th",10),t._uU(12,"Role"),t.qZA(),t.TgZ(13,"th",10),t._uU(14,"Fecha de Registro"),t.qZA(),t.TgZ(15,"th",10),t._uU(16,"Estatus"),t.qZA(),t.TgZ(17,"th",10),t._uU(18,"Opciones"),t.qZA()()(),t.TgZ(19,"tbody"),t.YNc(20,J,21,7,"tr",11),t.qZA()()),2&i){const o=t.oxw();t.xp6(20),t.Q6J("ngForOf",o.boletosSelected)}}const _=[{path:"",component:(()=>{var i;class c{constructor(a,l,s,u,b,R,F,Y){this.modalC=a,this.boletoRepo=l,this.eventoRepo=s,this.nav=u,this.genericS=b,this.alert=R,this.toast=F,this.activeRoute=Y,this.boletos=[],this.tipoPubico=A.x,this.boletosSelected=[],this.divisor=10}ngOnInit(){this.activeRoute.queryParams.subscribe(a=>{this.idEvento=Number(a.id)}),this.boletoRepo.evento$.subscribe(a=>{this.boletos=a.sort((l,s)=>e(s.createdAt).diff(e(l.createdAt))),this.boletosSelected=a.slice(0,this.divisor),0===this.boletos.length&&this.nav.navigateForward("dashboard/eventos")})}mon(a){return e().locale("es"),e(a).format("L")}edit(a){var l=this;return(0,T.Z)(function*(){yield(yield l.modalC.create({component:Z.x,componentProps:{boleto:a,evento:l.idEvento}})).present()})()}delete(a){var l=this;return(0,T.Z)(function*(){yield l.alert.setData({animated:!0,header:"Eliminar usuario",message:"\xbfDesea eliminarlo Permanentemente?",buttons:[{text:"cancelar"},{text:"Confirmar",handler:()=>{l.genericS.delete("boleto",a).subscribe(s=>{l.boletos=l.boletos.filter(u=>u.id!==a),l.toast.success("Usuario Eliminado Correctamente"),l.eventoRepo.updateEvento(l.idEvento,{boletos:l.boletos})})}}]})})()}getPagina(a){this.boletosSelected=this.boletos.slice(a*this.divisor,(a+1)*this.divisor)}}return(i=c).\u0275fac=function(a){return new(a||i)(t.Y36(f.IN),t.Y36(C.b9),t.Y36(g.hJ),t.Y36(f.SH),t.Y36(E.M),t.Y36(O.c),t.Y36(M._W),t.Y36(U.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-ver-usuarios"]],decls:12,vars:7,consts:[[3,"fullscreen"],[1,"mt-5"],[1,"container"],[1,"d-flex","mt-5"],[1,"h2"],["placeholder","Buscar usuario","inputmode","text","type","text",1,"ms-auto","me-3","my-0","w-100",3,"ngModel","debounce","ngModelChange"],["class","table mt-0",4,"ngIf"],[3,"total","divisor","pagina"],[1,"table","mt-0"],[1,"red"],["scope","col",1,"red"],[4,"ngFor","ngForOf"],["slot","start"],["color","primary","fill","clear",3,"click"],["slot","icon-only","name","create-outline"],["slot","icon-only","name","trash-outline"]],template:function(a,l){1&a&&(t.TgZ(0,"ion-content",0),t._UZ(1,"div",1)(2,"br"),t.TgZ(3,"div",2)(4,"div",3)(5,"h5",4)(6,"b"),t._uU(7,"Ver Usuarios"),t.qZA()(),t.TgZ(8,"ion-searchbar",5),t.NdJ("ngModelChange",function(){return l.boletosSelected=[]})("ngModelChange",function(u){return l.search=u}),t.qZA()(),t.YNc(9,D,22,4,"table",6),t.YNc(10,S,21,1,"table",6),t.TgZ(11,"paginador",7),t.NdJ("pagina",function(u){return l.getPagina(u)}),t.qZA()()()),2&a&&(t.Q6J("fullscreen",!0),t.xp6(8),t.Q6J("ngModel",l.search)("debounce",250),t.xp6(1),t.Q6J("ngIf",0===l.boletosSelected.length),t.xp6(1),t.Q6J("ngIf",l.boletosSelected.length>0),t.xp6(1),t.Q6J("total",l.boletos.length)("divisor",10))},dependencies:[h.sg,h.O5,v.JJ,v.On,f.YG,f.Sm,f.W2,f.gu,f.VI,f.j9,x.a,q],styles:[".red[_ngcontent-%COMP%]{background-color:red;color:#fff}"]}),c})()},{path:"editar-usuario",loadChildren:()=>r.e(6967).then(r.bind(r,6967)).then(i=>i.EditarUsuarioPageModule)}];let p=(()=>{var i;class c{}return(i=c).\u0275fac=function(a){return new(a||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[U.Bz.forChild(_),U.Bz]}),c})();var n=r(3386);let m=(()=>{var i;class c{}return(i=c).\u0275fac=function(a){return new(a||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[h.ez,v.u5,f.Pc,p,n.d,x.a]}),c})()}}]);