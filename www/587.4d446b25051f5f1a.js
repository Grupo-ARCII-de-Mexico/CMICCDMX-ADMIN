"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[587],{587:(z,J,c)=>{c.r(J),c.d(J,{VerNegociosPageModule:()=>B});var v=c(6814),h=c(95),g=c(9843),Z=c(7564),u=c(5861),S=c(9397),U=c(553),f=c(1486),o=c(6689),E=c(930),w=c(5368),F=c(2425),G=c(4433),Y=c(7153),O=c(7602),q=c(6991);let H=(()=>{var i;class a{transform(e,t){const r=[];if(!t)return e;if(e)for(const d of e){var n;(null==d||null===(n=d.empresa)||void 0===n?void 0:n.toLowerCase().indexOf(t.toLowerCase()))>-1&&r.push(d)}return(0,q.o)(r)}}return(i=a).\u0275fac=function(e){return new(e||i)},i.\u0275pipe=o.Yjl({name:"negocioSearch",type:i,pure:!0}),a})();function Q(i,a){if(1&i){const s=o.EpF();o.TgZ(0,"tr")(1,"th",15),o._UZ(2,"ion-img",16),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td")(6,"ion-buttons",17)(7,"ion-button",18),o.NdJ("click",function(){const r=o.CHM(s).$implicit,n=o.oxw(2);return o.KtG(n.alerta(r.identificador))}),o._UZ(8,"ion-icon",19),o.qZA(),o.TgZ(9,"ion-button",20),o.NdJ("click",function(){const r=o.CHM(s).$implicit,n=o.oxw(2);return o.KtG(n.vistaPrevia(r.id))}),o._UZ(10,"ion-icon",21),o.qZA(),o.TgZ(11,"ion-button",20),o.NdJ("click",function(){const r=o.CHM(s).$implicit,n=o.oxw(2);return o.KtG(n.exportToExcel(r.empresa,r.oportunidadNegocio))}),o._UZ(12,"ion-icon",22),o.qZA(),o.TgZ(13,"ion-button",23),o._UZ(14,"ion-icon",24),o.qZA(),o.TgZ(15,"ion-button",23),o._UZ(16,"ion-icon",25),o.qZA(),o.TgZ(17,"ion-button",20),o.NdJ("click",function(){const r=o.CHM(s).$implicit,n=o.oxw(2);return o.KtG(n.delete(r.id))}),o._UZ(18,"ion-icon",26),o.qZA()()()()}if(2&i){const s=a.$implicit,e=o.oxw(2);o.xp6(2),o.Q6J("src",e.uri+s.logotipo),o.xp6(2),o.Oqu(null==s?null:s.empresa),o.xp6(9),o.s9C("routerLink",s.identificador),o.xp6(2),o.MGl("routerLink","editar-oportunidad/",s.id,"")}}function K(i,a){if(1&i&&(o.TgZ(0,"tbody"),o.YNc(1,Q,19,4,"tr",14),o.ALo(2,"negocioSearch"),o.qZA()),2&i){const s=o.oxw();o.xp6(1),o.Q6J("ngForOf",o.xi3(2,1,s.negocios,s.search))}}function L(i,a){if(1&i){const s=o.EpF();o.TgZ(0,"tr")(1,"th",15),o._UZ(2,"ion-img",16),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td")(6,"ion-buttons",17)(7,"ion-button",18),o.NdJ("click",function(){const r=o.CHM(s).$implicit,n=o.oxw(2);return o.KtG(n.alerta(r.identificador))}),o._UZ(8,"ion-icon",19),o.qZA(),o.TgZ(9,"ion-button",20),o.NdJ("click",function(){const r=o.CHM(s).$implicit,n=o.oxw(2);return o.KtG(n.vistaPrevia(r.id))}),o._UZ(10,"ion-icon",21),o.qZA(),o.TgZ(11,"ion-button",20),o.NdJ("click",function(){const r=o.CHM(s).$implicit,n=o.oxw(2);return o.KtG(n.exportToExcel(r.empresa,r.oportunidadNegocio))}),o._UZ(12,"ion-icon",22),o.qZA(),o.TgZ(13,"ion-button",23),o._UZ(14,"ion-icon",24),o.qZA(),o.TgZ(15,"ion-button",23),o._UZ(16,"ion-icon",25),o.qZA(),o.TgZ(17,"ion-button",20),o.NdJ("click",function(){const r=o.CHM(s).$implicit,n=o.oxw(2);return o.KtG(n.delete(r.id))}),o._UZ(18,"ion-icon",26),o.qZA()()()()}if(2&i){const s=a.$implicit,e=o.oxw(2);o.xp6(2),o.Q6J("src",e.uri+s.logotipo),o.xp6(2),o.Oqu(null==s?null:s.empresa),o.xp6(9),o.s9C("routerLink",s.identificador),o.xp6(2),o.MGl("routerLink","editar-oportunidad/",s.id,"")}}function I(i,a){if(1&i&&(o.TgZ(0,"tbody"),o.YNc(1,L,19,4,"tr",14),o.qZA()),2&i){const s=o.oxw();o.xp6(1),o.Q6J("ngForOf",s.negociosSelected)}}const R=[{path:"",component:(()=>{var i;class a{constructor(e,t,r,n,d){this.gService=e,this.negocioRepo=t,this.toast=r,this.alerts=n,this.loading=d,this.negocios=[],this.uri=U.N.image+"oportunidades-logotipos/",this.negociosSelected=[],this.divisor=15,this.pagina=0}ngOnInit(){this.gService.getAll("negocio").subscribe(e=>{this.negocioRepo.setNegocio(e)}),this.negocioRepo.negocio$.pipe((0,S.b)(e=>this.negocios=e)).subscribe()}vistaPrevia(e){var t=this;return(0,u.Z)(function*(){const r=t.negocios.find(n=>n.id===e);r&&window.open(U.N.host+"oportunidad-negocio/"+r.identificador,"_blank")})()}delete(e){var t=this;return(0,u.Z)(function*(){var r;yield t.alerts.setData({animated:!0,header:"Eliminar ON",message:"\xbfDesea Eliminar esta ON?",buttons:[{text:"Cancelar"},{text:"Eliminar",handler:(r=(0,u.Z)(function*(){t.gService.delete("negocio",e).subscribe(function(){var n=(0,u.Z)(function*(d){t.negocios=t.negocios.filter(p=>p.id!==e),t.toast.success("ON eliminada","Eliminado")});return function(d){return n.apply(this,arguments)}}())}),function(){return r.apply(this,arguments)})}]})})()}exportToExcel(e,t){let r=[];for(let l of t){var n,d,p,m,x,_,N,b,y,C,T,P,A,M,V;r.push({Empresa:null!==(n=l.empresa)&&void 0!==n?n:"","No. Afiliado":null!==(d=l.afiliado)&&void 0!==d?d:"",Calle:null!==(p=l.calle)&&void 0!==p?p:"",Colonia:null!==(m=l.colonia)&&void 0!==m?m:"","Alcald\xeda / Municipio":null!==(x=l.municipio)&&void 0!==x?x:"",Estado:null!==(_=l.estado)&&void 0!==_?_:"","C\xf3digo Postal":null!==(N=l.cp)&&void 0!==N?N:"",Denominaci\u00f3n:null!==(b=l.denominacion)&&void 0!==b?b:"","Sitio Web":null!==(y=l.web)&&void 0!==y?y:"","Nombre de Contacto":null!==(C=l.contacto.nombre)&&void 0!==C?C:"","Apellido Paterno Contacto":null!==(T=l.contacto.paterno)&&void 0!==T?T:"","Apellido Materno de Contacto":null!==(P=l.contacto.materno)&&void 0!==P?P:"","Telefono1 de Contacto":null!==(A=l.contacto.telefono)&&void 0!==A?A:"","Telefono 2 de Contacto":null!==(M=l.contacto.telefonoOficina)&&void 0!==M?M:"","Correo de Contacto":null!==(V=l.contacto.email)&&void 0!==V?V:""})}if(r){const l=f.P6.json_to_sheet(r),k=f.P6.book_new();f.P6.book_append_sheet(k,l,"Sheet1"),f.NC(k,e+".xlsx")}}alerta(e){var t=this;return(0,u.Z)(function*(){var r;yield t.loading.setData({animated:!0,message:"Enviando..."}),yield t.alerts.setData({animated:!0,header:"Enviar Acceso a la Empresa",message:"Agregue el correo a quien desea enviar el acceso (Si vuelve a mandar este correo el acceso anterior ser\xe1 eliminado)",backdropDismiss:!1,inputs:[{type:"email",name:"password",placeholder:"Ingrese el correo"}],buttons:[{text:"Enviar contrase\xf1a",handler:(r=(0,u.Z)(function*(n){return yield t.loading.create(),yield t.loading.show(),!!(yield t.gService.post("negocio/sendPassword/"+e,{email:n.password}).toPromise().catch(function(){var p=(0,u.Z)(function*(m){});return function(m){return p.apply(this,arguments)}}()))&&(yield t.loading.hide(),!0)}),function(d){return r.apply(this,arguments)})}]})})()}getPagina(e){this.pagina=e,this.negocios=this.negocios.slice(e*this.divisor,(e+1)*this.divisor)}}return(i=a).\u0275fac=function(e){return new(e||i)(o.Y36(E.M),o.Y36(w.v),o.Y36(F._W),o.Y36(G.c),o.Y36(Y.b))},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-ver-negocios"]],decls:24,vars:7,consts:[[3,"fullscreen"],["color","dark",1,"py-2"],[1,"ms-2","ms-md-5","mb-0","titulo"],[1,"palito","ms-2","ms-md-5","mt-0","mb-3"],[1,"px-3"],[1,"container"],[1,"d-flex","mt-1"],["placeholder","Buscar Oportunidad de Negocio","inputmode","text","type","text",1,"ms-auto","me-3","my-0","w-100",3,"ngModel","debounce","ngModelChange"],[1,"table","mt-0"],[1,"red"],["scope","col",1,"red","d-none","d-md-block"],["scope","col",1,"red"],[4,"ngIf"],[3,"total","divisor","pagina"],[4,"ngFor","ngForOf"],["scope","row",1,"text-center","d-none","d-md-block"],[1,"img-fluid",3,"src"],["color","primary","slot","start"],["color","primary",1,"",3,"click"],["slot","icon-only","name","send-outline"],["color","primary",3,"click"],["slot","icon-only","name","eye-outline"],["slot","icon-only","name","download-outline"],["color","primary",3,"routerLink"],["slot","icon-only","name","people-outline"],["slot","icon-only","name","create-outline"],["slot","icon-only","name","trash-outline"]],template:function(e,t){1&e&&(o.TgZ(0,"ion-content",0),o._UZ(1,"br"),o.TgZ(2,"ion-toolbar",1),o._UZ(3,"br"),o.TgZ(4,"h1",2)(5,"b"),o._uU(6," Oportunidades de Negocio"),o.qZA()(),o._UZ(7,"hr",3),o.qZA(),o.TgZ(8,"div",4)(9,"div",5)(10,"div",6)(11,"ion-searchbar",7),o.NdJ("ngModelChange",function(n){return t.search=n})("ngModelChange",function(){return t.negociosSelected=[]}),o.qZA()(),o.TgZ(12,"table",8)(13,"thead",9)(14,"tr")(15,"th",10),o._uU(16,"Foto"),o.qZA(),o.TgZ(17,"th",11),o._uU(18,"Empresa"),o.qZA(),o.TgZ(19,"th",11),o._uU(20,"Opciones"),o.qZA()()(),o.YNc(21,K,3,4,"tbody",12),o.YNc(22,I,2,1,"tbody",12),o.qZA(),o.TgZ(23,"paginador",13),o.NdJ("pagina",function(n){return t.getPagina(n)}),o.qZA()()()()),2&e&&(o.Q6J("fullscreen",!0),o.xp6(11),o.Q6J("ngModel",t.search)("debounce",250),o.xp6(10),o.Q6J("ngIf",0===t.negociosSelected.length),o.xp6(1),o.Q6J("ngIf",t.negociosSelected.length>0),o.xp6(1),o.Q6J("total",t.negocios.length)("divisor",t.divisor))},dependencies:[v.sg,v.O5,h.JJ,h.On,g.YG,g.Sm,g.W2,g.gu,g.Xz,g.VI,g.sr,g.j9,g.YI,Z.rH,O.a,H],styles:[".img-fluid[_ngcontent-%COMP%]{max-width:200px}.red[_ngcontent-%COMP%]{background-color:var(--ion-color-primary);color:#fff}"]}),a})()}];let D=(()=>{var i;class a{}return(i=a).\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({imports:[Z.Bz.forChild(R),Z.Bz]}),a})();var j=c(3386);let B=(()=>{var i;class a{}return(i=a).\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({imports:[v.ez,h.u5,g.Pc,D,O.a,j.d]}),a})()}}]);