"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7446],{7446:(ct,x,_)=>{_.d(x,{H:()=>et});var u=_(5861),f=_(1842),m=_(4664),h=_(9397),Z=_(553),t=_(6689),a=_(9843),T=_(930),A=_(7153),C=_(2425),M=_(4433),p=_(6814),g=_(95);function P(n,d){if(1&n){const i=t.EpF();t.TgZ(0,"ion-button",17),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.changeEdit())}),t._UZ(1,"ion-icon",18),t.qZA()}if(2&n){const i=t.oxw();t.xp6(1),t.Q6J("name",i.edit?"save":"pencil")}}function q(n,d){if(1&n&&(t.TgZ(0,"ion-text",15)(1,"h5")(2,"b"),t._uU(3),t.qZA()()()),2&n){const i=t.oxw();t.xp6(3),t.Oqu(i.oportunidad.afiliado)}}function E(n,d){if(1&n){const i=t.EpF();t.TgZ(0,"ion-input",19),t.NdJ("ngModelChange",function(o){t.CHM(i);const c=t.oxw();return t.KtG(c.oportunidad.afiliado=o)}),t.qZA()}if(2&n){const i=t.oxw();t.Q6J("readonly",!i.edit)("ngModel",i.oportunidad.afiliado)}}function J(n,d){if(1&n&&(t.TgZ(0,"ion-text",15)(1,"h5")(2,"b"),t._uU(3),t.qZA()()()),2&n){const i=t.oxw();t.xp6(3),t.Oqu(i.oportunidad.empresa)}}function S(n,d){if(1&n){const i=t.EpF();t.TgZ(0,"ion-input",19),t.NdJ("ngModelChange",function(o){t.CHM(i);const c=t.oxw();return t.KtG(c.oportunidad.empresa=o)}),t.qZA()}if(2&n){const i=t.oxw();t.Q6J("readonly",!i.edit)("ngModel",i.oportunidad.empresa)}}function v(n,d){if(1&n&&(t.TgZ(0,"ion-text",15)(1,"h5")(2,"b"),t._uU(3),t.qZA()()()),2&n){const i=t.oxw();t.xp6(3),t.Oqu(i.oportunidad.denominacion)}}function I(n,d){if(1&n){const i=t.EpF();t.TgZ(0,"ion-input",19),t.NdJ("ngModelChange",function(o){t.CHM(i);const c=t.oxw();return t.KtG(c.oportunidad.denominacion=o)}),t.qZA()}if(2&n){const i=t.oxw();t.Q6J("readonly",!i.edit)("ngModel",i.oportunidad.denominacion)}}function U(n,d){if(1&n&&(t.TgZ(0,"ion-text",15)(1,"h5")(2,"b"),t._uU(3),t.qZA()()()),2&n){const i=t.oxw();t.xp6(3),t.Oqu(i.oportunidad.rfc)}}function N(n,d){if(1&n){const i=t.EpF();t.TgZ(0,"ion-input",19),t.NdJ("ngModelChange",function(o){t.CHM(i);const c=t.oxw();return t.KtG(c.oportunidad.rfc=o)}),t.qZA()}if(2&n){const i=t.oxw();t.Q6J("readonly",!i.edit)("ngModel",i.oportunidad.rfc)}}function O(n,d){if(1&n&&(t.TgZ(0,"ion-text",15)(1,"h5")(2,"b"),t._uU(3),t.qZA()()()),2&n){const i=t.oxw();t.xp6(3),t.Oqu(i.oportunidad.calle)}}function V(n,d){if(1&n){const i=t.EpF();t.TgZ(0,"ion-input",19),t.NdJ("ngModelChange",function(o){t.CHM(i);const c=t.oxw();return t.KtG(c.oportunidad.calle=o)}),t.qZA()}if(2&n){const i=t.oxw();t.Q6J("readonly",!i.edit)("ngModel",i.oportunidad.calle)}}function w(n,d){if(1&n&&(t.TgZ(0,"ion-text",15)(1,"h5")(2,"b"),t._uU(3),t.qZA()()()),2&n){const i=t.oxw();t.xp6(3),t.Oqu(i.oportunidad.colonia)}}function b(n,d){if(1&n){const i=t.EpF();t.TgZ(0,"ion-input",19),t.NdJ("ngModelChange",function(o){t.CHM(i);const c=t.oxw();return t.KtG(c.oportunidad.colonia=o)}),t.qZA()}if(2&n){const i=t.oxw();t.Q6J("readonly",!i.edit)("ngModel",i.oportunidad.colonia)}}function Q(n,d){if(1&n&&(t.TgZ(0,"ion-text",15)(1,"h5")(2,"b"),t._uU(3),t.qZA()()()),2&n){const i=t.oxw();t.xp6(3),t.Oqu(i.oportunidad.municipio)}}function y(n,d){if(1&n){const i=t.EpF();t.TgZ(0,"ion-input",19),t.NdJ("ngModelChange",function(o){t.CHM(i);const c=t.oxw();return t.KtG(c.oportunidad.municipio=o)}),t.qZA()}if(2&n){const i=t.oxw();t.Q6J("readonly",!i.edit)("ngModel",i.oportunidad.municipio)}}function Y(n,d){if(1&n&&(t.TgZ(0,"ion-text",15)(1,"h5")(2,"b"),t._uU(3),t.qZA()()()),2&n){const i=t.oxw();t.xp6(3),t.Oqu(i.oportunidad.estado)}}function D(n,d){if(1&n){const i=t.EpF();t.TgZ(0,"ion-input",19),t.NdJ("ngModelChange",function(o){t.CHM(i);const c=t.oxw();return t.KtG(c.oportunidad.estado=o)}),t.qZA()}if(2&n){const i=t.oxw();t.Q6J("readonly",!i.edit)("ngModel",i.oportunidad.estado)}}function F(n,d){if(1&n&&(t.TgZ(0,"ion-text",15)(1,"h5")(2,"b"),t._uU(3),t.qZA()()()),2&n){const i=t.oxw();t.xp6(3),t.Oqu(i.oportunidad.web)}}function K(n,d){if(1&n){const i=t.EpF();t.TgZ(0,"ion-input",19),t.NdJ("ngModelChange",function(o){t.CHM(i);const c=t.oxw();return t.KtG(c.oportunidad.web=o)}),t.qZA()}if(2&n){const i=t.oxw();t.Q6J("readonly",!i.edit)("ngModel",i.oportunidad.web)}}function k(n,d){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const i=d.$implicit;t.xp6(1),t.Oqu(i)}}function G(n,d){if(1&n&&(t.TgZ(0,"ion-item",8)(1,"ion-label",9)(2,"h5",20),t._uU(3,"Especialidades"),t.qZA(),t.YNc(4,k,2,1,"p",21),t.qZA()()),2&n){const i=t.oxw();t.xp6(4),t.Q6J("ngForOf",i.oportunidad.especialidades)}}function H(n,d){1&n&&(t.TgZ(0,"h5",20),t._uU(1,"Especialidades"),t.qZA())}function R(n,d){if(1&n){const i=t.EpF();t.TgZ(0,"ion-checkbox",25),t.NdJ("ionChange",function(o){const l=t.CHM(i).$implicit,r=t.oxw(2);return t.KtG(r.setEspecialidad(o,l))}),t._uU(1),t.qZA()}if(2&n){const i=d.$implicit,e=t.oxw(2);t.Q6J("checked",e.findEspecialidad(i)),t.xp6(1),t.Oqu(i)}}function W(n,d){if(1&n&&(t.TgZ(0,"div",22),t.YNc(1,H,2,0,"h5",23),t._UZ(2,"br"),t.YNc(3,R,2,2,"ion-checkbox",24),t.qZA()),2&n){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.negocio.especialidades.length>0),t.xp6(2),t.Q6J("ngForOf",null==i.negocio?null:i.negocio.especialidades)}}function B(n,d){if(1&n&&(t.TgZ(0,"ion-text",15)(1,"h5")(2,"b"),t._uU(3),t.qZA()()()),2&n){const i=t.oxw();t.xp6(3),t.Oqu(i.oportunidad.contacto.email)}}function L(n,d){if(1&n){const i=t.EpF();t.TgZ(0,"ion-input",19),t.NdJ("ngModelChange",function(o){t.CHM(i);const c=t.oxw();return t.KtG(c.oportunidad.contacto.email=o)}),t.qZA()}if(2&n){const i=t.oxw();t.Q6J("readonly",!i.edit)("ngModel",i.oportunidad.contacto.email)}}function $(n,d){if(1&n&&(t.TgZ(0,"ion-text",15)(1,"h5")(2,"b"),t._uU(3),t.qZA()()()),2&n){const i=t.oxw();t.xp6(3),t.Oqu(i.oportunidad.contacto.telefono)}}function j(n,d){if(1&n){const i=t.EpF();t.TgZ(0,"ion-input",19),t.NdJ("ngModelChange",function(o){t.CHM(i);const c=t.oxw();return t.KtG(c.oportunidad.contacto.telefono=o)}),t.qZA()}if(2&n){const i=t.oxw();t.Q6J("readonly",!i.edit)("ngModel",i.oportunidad.contacto.telefono)}}function z(n,d){if(1&n&&(t.TgZ(0,"ion-text",15)(1,"h5")(2,"b"),t._uU(3),t.qZA()()()),2&n){const i=t.oxw();t.xp6(3),t.Oqu(i.oportunidad.contacto.telefonoOficina)}}function X(n,d){if(1&n){const i=t.EpF();t.TgZ(0,"ion-input",19),t.NdJ("ngModelChange",function(o){t.CHM(i);const c=t.oxw();return t.KtG(c.oportunidad.contacto.telefonoOficina=o)}),t.qZA()}if(2&n){const i=t.oxw();t.Q6J("readonly",!i.edit)("ngModel",i.oportunidad.contacto.telefonoOficina)}}function tt(n,d){if(1&n){const i=t.EpF();t.TgZ(0,"ion-item",8)(1,"ion-button",27),t.NdJ("click",function(){const c=t.CHM(i).$implicit,l=t.oxw(2);return t.KtG(l.download(c))}),t._UZ(2,"ion-icon",28),t.qZA(),t.TgZ(3,"ion-text",9)(4,"h5",29),t._uU(5),t.qZA()(),t.TgZ(6,"ion-button",30),t.NdJ("click",function(){const c=t.CHM(i).$implicit,l=t.oxw(2);return t.KtG(l.view(c))}),t._uU(7," Ver Archivo "),t.qZA()()}if(2&n){const i=d.$implicit;t.xp6(5),t.Oqu(i.documento)}}function it(n,d){if(1&n&&(t.TgZ(0,"div")(1,"h5",7),t._uU(2,"Documentos"),t.qZA(),t.YNc(3,tt,8,1,"ion-item",26),t.qZA()),2&n){const i=t.oxw();t.xp6(3),t.Q6J("ngForOf",i.oportunidad.documentos)}}function ot(n,d){if(1&n){const i=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label"),t._uU(2),t.TgZ(3,"p"),t._uU(4),t._UZ(5,"br"),t._uU(6," (formato PDF) "),t.qZA()(),t.TgZ(7,"ion-button",31),t.NdJ("click",function(){const c=t.CHM(i).$implicit,l=t.oxw(2);return t.KtG(l.click(c.texto))}),t.TgZ(8,"ion-label"),t._uU(9),t.qZA(),t.TgZ(10,"input",32),t.NdJ("change",function(o){const l=t.CHM(i).index,r=t.oxw(2);return t.KtG(r.onFileSelected(o,l))}),t.qZA()()()}if(2&n){const i=d.$implicit,e=d.index,o=t.oxw(2);t.xp6(2),t.hij(" ",i.texto," "),t.xp6(2),t.hij(" ",i.descripcion," "),t.xp6(3),t.Q6J("color",null!=o.files[e]&&o.files[e].uri?"success":"primary"),t.xp6(2),t.Oqu(o.files[e].uri?"Archivo Cargado":"Seleccionar archivo"),t.xp6(1),t.Q6J("id",i.texto)}}function nt(n,d){if(1&n&&(t.TgZ(0,"div")(1,"h5",7),t._uU(2,"Documentos"),t.qZA(),t.YNc(3,ot,11,5,"ion-item",21),t.qZA()),2&n){const i=t.oxw();t.xp6(3),t.Q6J("ngForOf",i.negocio.documentos)}}let et=(()=>{var n;class d{constructor(e,o,c,l,r){this.modalc=e,this.genericService=o,this.loading=c,this.toast=l,this.alertS=r,this.ext=!1,this.edit=!1,this.documentosFaltantes=[],this.especialidades=[],this.files=[],this.uri=Z.N.image+"oportunidades-documentos/"}ngOnInit(){this.documentosFaltantes=this.negocio.documentos.filter(e=>!this.oportunidad.documentos.some(o=>(null==o?void 0:o.documento)===e.texto)),this.files=Array(30).fill({documento:null,uri:null})}view(e){var o=this;return(0,u.Z)(function*(){yield(yield o.modalc.create({component:f.w,componentProps:{titulo:e.documento,pdf:e.uri},id:"aaa"})).present()})()}setEspecialidad(e,o){e.detail.checked?(this.especialidades.push(o),this.especialidades=Array.from(new Set(this.especialidades))):this.especialidades=this.especialidades.filter(c=>c!==o)}onFileSelected(e,o){this.files[o]={documento:this.negocio.documentos[o].texto,uri:e.target.files[0]},e.target.value=""}click(e){document.getElementById(e).click()}download(e){const o=document.createElement("a");o.href=this.uri+e.uri,o.download=e.documento,document.body.appendChild(o),o.click(),document.body.removeChild(o)}editar(){var e=this;return(0,u.Z)(function*(){for(const o of e.files)if(o.uri){const c=new FormData;c.append("documento",o.uri);const l=yield e.genericService.post("negocio/documentos",c).toPromise();e.oportunidad.documentos.some(s=>o.documento===s.documento)?e.oportunidad.documentos=e.oportunidad.documentos.map(s=>o.documento===s.documento?{documento:o.documento,uri:l.file}:s):e.oportunidad.documentos.push({documento:o.documento,uri:l.file})}e.loading.setData({animated:!0,message:"Subiendo...",spinner:"dots"}),yield e.loading.create(),yield e.loading.show(),e.genericService.update("negocio/oportunidad",e.oportunidad.id,{...e.oportunidad,especialidades:e.especialidades}).pipe((0,m.w)(o=>e.genericService.update("negocio/contacto",e.oportunidad.contacto.id,{...e.oportunidad.contacto})),(0,h.b)(function(){var o=(0,u.Z)(function*(c){yield e.loading.hide(),e.toast.success("Espere notificaciones por el correo del contacto","Registro Guardado"),e.edit=!1,e.especialidades=[],e.files=Array(30).fill({documento:null,uri:null})});return function(c){return o.apply(this,arguments)}}())).subscribe()})()}changeEdit(){var e=this;return(0,u.Z)(function*(){var o;e.edit=!e.edit,e.edit?e.especialidades=e.oportunidad.especialidades:yield e.alertS.setData({animated:!0,header:"Guardar Cambios",message:"Todos los cambios que haya realizado se guardaran una vez haya confirmado, \xbfDesea continuar?",buttons:[{text:"Cancelar"},{text:"Guardar Cambios",handler:(o=(0,u.Z)(function*(){yield e.editar()}),function(){return o.apply(this,arguments)})}]})})()}findEspecialidad(e){return!!this.oportunidad.especialidades.some(o=>o==e)}}return(n=d).\u0275fac=function(e){return new(e||n)(t.Y36(a.IN),t.Y36(T.M),t.Y36(A.b),t.Y36(C._W),t.Y36(M.c))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-ver-solicitud"]],inputs:{negocio:"negocio",oportunidad:"oportunidad",ext:"ext"},decls:97,vars:35,consts:[[3,"translucent"],["color","secondary"],["color","light","slot","start","expand","block","fill","clear","shape","round",3,"click"],["slot","icon-only","name","close-outline"],["slot","end","color","light","fill","clear",3,"click",4,"ngIf"],[3,"fullscreen"],[1,"container","mt-3"],[1,"ion-padding","h5",2,"color","red"],["lines","none"],["color","dark","slot","start"],["color","dark","slot","end",4,"ngIf"],["slot","end","labelPlacement","floating","label","Edita ","type","text",3,"readonly","ngModel","ngModelChange",4,"ngIf"],["lines","none",4,"ngIf"],["lines","none","class","ion-padding",4,"ngIf"],[1,"ion-padding","h5","font-weight",2,"color","red"],["color","dark","slot","end"],[4,"ngIf"],["slot","end","color","light","fill","clear",3,"click"],["slot","icon-only",3,"name"],["slot","end","labelPlacement","floating","label","Edita ","type","text",3,"readonly","ngModel","ngModelChange"],[2,"color","red"],[4,"ngFor","ngForOf"],["lines","none",1,"ion-padding"],["style","color: red;",4,"ngIf"],["class","m-3",3,"checked","ionChange",4,"ngFor","ngForOf"],[1,"m-3",3,"checked","ionChange"],["lines","none",4,"ngFor","ngForOf"],["slot","start","fill","clear",3,"click"],["slot","icon-only","name","download-outline"],[1,"mb-0","pb-0"],["expand","block","slot","end","shape","round",3,"click"],["expand","block","fill","clear","slot","end",3,"color","click"],["type","file","accept",".pdf",2,"display","none",3,"id","change"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-button",2),t.NdJ("click",function(){return o.modalc.dismiss()}),t._UZ(3,"ion-icon",3),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5),t.qZA(),t.YNc(6,P,2,1,"ion-button",4),t.qZA()(),t.TgZ(7,"ion-content",5)(8,"div",6)(9,"h5",7),t._uU(10,"Informaci\xf3n de la Empresa"),t.qZA(),t.TgZ(11,"ion-item",8)(12,"ion-text",9)(13,"h5"),t._uU(14,"No. Afiliado"),t.qZA()(),t.YNc(15,q,4,1,"ion-text",10),t.YNc(16,E,1,2,"ion-input",11),t.qZA(),t.TgZ(17,"ion-item",8)(18,"ion-text",9)(19,"h5"),t._uU(20,"Empresa"),t.qZA()(),t.YNc(21,J,4,1,"ion-text",10),t.YNc(22,S,1,2,"ion-input",11),t.qZA(),t.TgZ(23,"ion-item",8)(24,"ion-text",9)(25,"h5"),t._uU(26,"Denominaci\xf3n"),t.qZA()(),t.YNc(27,v,4,1,"ion-text",10),t.YNc(28,I,1,2,"ion-input",11),t.qZA(),t.TgZ(29,"ion-item",8)(30,"ion-text",9)(31,"h5"),t._uU(32,"RFC"),t.qZA()(),t.YNc(33,U,4,1,"ion-text",10),t.YNc(34,N,1,2,"ion-input",11),t.qZA(),t.TgZ(35,"ion-item",8)(36,"ion-text",9)(37,"h5"),t._uU(38,"Calle"),t.qZA()(),t.YNc(39,O,4,1,"ion-text",10),t.YNc(40,V,1,2,"ion-input",11),t.qZA(),t.TgZ(41,"ion-item",8)(42,"ion-text",9)(43,"h5"),t._uU(44,"Colonia"),t.qZA()(),t.YNc(45,w,4,1,"ion-text",10),t.YNc(46,b,1,2,"ion-input",11),t.qZA(),t.TgZ(47,"ion-item",8)(48,"ion-text",9)(49,"h5"),t._uU(50,"Municipio"),t.qZA()(),t.YNc(51,Q,4,1,"ion-text",10),t.YNc(52,y,1,2,"ion-input",11),t.qZA(),t.TgZ(53,"ion-item",8)(54,"ion-text",9)(55,"h5"),t._uU(56,"Estado"),t.qZA()(),t.YNc(57,Y,4,1,"ion-text",10),t.YNc(58,D,1,2,"ion-input",11),t.qZA(),t.TgZ(59,"ion-item",8)(60,"ion-text",9)(61,"h5"),t._uU(62,"WebSite"),t.qZA()(),t.YNc(63,F,4,1,"ion-text",10),t.YNc(64,K,1,2,"ion-input",11),t.qZA(),t.YNc(65,G,5,1,"ion-item",12),t.YNc(66,W,4,2,"div",13),t.TgZ(67,"h5",14),t._uU(68,"Informaci\xf3n de Contacto"),t.qZA(),t.TgZ(69,"ion-item",8)(70,"ion-text",9)(71,"h5"),t._uU(72,"Nombre"),t.qZA()(),t.TgZ(73,"ion-text",15)(74,"h5")(75,"b"),t._uU(76),t.qZA()()()(),t.TgZ(77,"ion-item",8)(78,"ion-text",9)(79,"h5"),t._uU(80,"Correo Electr\xf3nico"),t.qZA()(),t.YNc(81,B,4,1,"ion-text",10),t.YNc(82,L,1,2,"ion-input",11),t.qZA(),t.TgZ(83,"ion-item",8)(84,"ion-text",9)(85,"h5"),t._uU(86,"Tel\xe9fono Celular"),t.qZA()(),t.YNc(87,$,4,1,"ion-text",10),t.YNc(88,j,1,2,"ion-input",11),t.qZA(),t.TgZ(89,"ion-item",8)(90,"ion-text",9)(91,"h5"),t._uU(92,"Tel\xe9fono Oficina"),t.qZA()(),t.YNc(93,z,4,1,"ion-text",10),t.YNc(94,X,1,2,"ion-input",11),t.qZA(),t.YNc(95,it,4,1,"div",16),t.YNc(96,nt,4,1,"div",16),t.qZA()()),2&e&&(t.Q6J("translucent",!0),t.xp6(5),t.hij("Solicitud de ",o.oportunidad.empresa,""),t.xp6(1),t.Q6J("ngIf",!o.ext),t.xp6(1),t.Q6J("fullscreen",!0),t.xp6(8),t.Q6J("ngIf",!o.edit),t.xp6(1),t.Q6J("ngIf",o.edit),t.xp6(5),t.Q6J("ngIf",!o.edit),t.xp6(1),t.Q6J("ngIf",o.edit),t.xp6(5),t.Q6J("ngIf",!o.edit),t.xp6(1),t.Q6J("ngIf",o.edit),t.xp6(5),t.Q6J("ngIf",!o.edit),t.xp6(1),t.Q6J("ngIf",o.edit),t.xp6(5),t.Q6J("ngIf",!o.edit),t.xp6(1),t.Q6J("ngIf",o.edit),t.xp6(5),t.Q6J("ngIf",!o.edit),t.xp6(1),t.Q6J("ngIf",o.edit),t.xp6(5),t.Q6J("ngIf",!o.edit),t.xp6(1),t.Q6J("ngIf",o.edit),t.xp6(5),t.Q6J("ngIf",!o.edit),t.xp6(1),t.Q6J("ngIf",o.edit),t.xp6(5),t.Q6J("ngIf",!o.edit),t.xp6(1),t.Q6J("ngIf",o.edit),t.xp6(1),t.Q6J("ngIf",o.oportunidad.especialidades.length>0&&!o.edit),t.xp6(1),t.Q6J("ngIf",o.edit),t.xp6(10),t.lnq("",o.oportunidad.contacto.nombre," ",o.oportunidad.contacto.paterno," ",o.oportunidad.contacto.materno,""),t.xp6(5),t.Q6J("ngIf",!o.edit),t.xp6(1),t.Q6J("ngIf",o.edit),t.xp6(5),t.Q6J("ngIf",!o.edit),t.xp6(1),t.Q6J("ngIf",o.edit),t.xp6(5),t.Q6J("ngIf",!o.edit),t.xp6(1),t.Q6J("ngIf",o.edit),t.xp6(1),t.Q6J("ngIf",!o.edit),t.xp6(1),t.Q6J("ngIf",o.edit))},dependencies:[p.sg,p.O5,g.JJ,g.On,a.YG,a.nz,a.W2,a.Gu,a.gu,a.pK,a.Ie,a.Q$,a.yW,a.wd,a.sr,a.w,a.j9]}),d})()}}]);