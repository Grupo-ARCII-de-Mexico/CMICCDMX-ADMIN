"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8198],{8198:(I,g,s)=>{s.r(g),s.d(g,{EstadisticasPageModule:()=>x});var E=s(6814),y=s(95),l=s(9843),p=s(7564),A=s(6676),f=s(4664),b=s(9397);function h(){const a=()=>Math.floor(256*Math.random()).toString(16).padStart(2,"0");return`#${a()}${a()}${a()}`}var t=s(6689),M=s(8013),P=s(2051),U=s(5368),u=s(4591),v=s(337);const T=[{path:"",component:(()=>{var a;class n{constructor(o,r,c){this.eventoRepo=o,this.apoyoRepo=r,this.oportunidadRepo=c,this.eventos=[],this.apoyos=[],this.negocios=[]}ngOnInit(){this.eventoRepo.evento$.pipe((0,f.w)(o=>(this.eventos=o,this.graficasEventos(),this.apoyoRepo.user$)),(0,f.w)(o=>(this.apoyos=o,this.oportunidadRepo.negocio$)),(0,b.b)(o=>{this.negocios=o})).subscribe()}ionViewWillEnter(){this.graficasEventos()}graficasEventos(){let o=[];const r=new Array(12).fill(0),c=new Array(3).fill(0);this.eventos=this.eventos.sort((e,d)=>new Date(e.fechaInicio).getTime()-new Date(d.fechaInicio).getTime()),this.eventos.forEach(e=>{for(const B of e.boletos)c[0]++,B.active&&!e.esGratis?c[1]++:c[2]++;const Z=A(e.fechaInicio).format("MMM");o.push(Z),o.includes(Z)?r[new Date(e.fechaInicio).getMonth()]++:r[new Date(e.fechaInicio).getMonth()]=1}),o=[...new Set(o)];const m=[];r.forEach(e=>{e>0&&m.push(e)}),this.barchartEvento={series:[{name:"Eventos",data:m}],chart:{height:350,type:"bar"},title:{text:"Eventos en el a\xf1o"},xaxis:{categories:o}},this.radialChartEvento={series:c,chart:{height:390,type:"radialBar"},plotOptions:{radialBar:{offsetY:0,startAngle:0,endAngle:270,hollow:{margin:5,size:"30%",background:"transparent",image:void 0},dataLabels:{name:{show:!1},value:{show:!1}}}},colors:[h(),h(),h()],labels:["Boletos Totales","Pagados","No Pagados"],legend:{show:!0,floating:!0,fontSize:"16px",position:"left",offsetX:50,offsetY:10,labels:{useSeriesColors:!0},formatter:function(e,d){return e+":  "+d.w.globals.series[d.seriesIndex]},itemMargin:{horizontal:3}},responsive:[{breakpoint:480,options:{legend:{show:!0}}}]}}graficasOportunidad(){}graficasApoyos(){}}return(a=n).\u0275fac=function(o){return new(o||a)(t.Y36(M.hJ),t.Y36(P.d),t.Y36(U.v))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-estadisticas"]],decls:39,vars:3,consts:[[3,"fullscreen"],["color","dark",1,"mt-4","py-2"],[1,"ms-2","ms-md-5","mb-0","titulo"],[1,"palito","ms-2","ms-md-5","mt-0","mb-3"],[1,"container"],[1,"mb-0"],[1,"row"],["mode","ios",1,"p-3","mx-md-0","col-md-6","shadow"],[3,"chartOptions"]],template:function(o,r){1&o&&(t.TgZ(0,"ion-content",0)(1,"ion-toolbar",1),t._UZ(2,"br"),t.TgZ(3,"h1",2)(4,"b"),t._uU(5,"Estadisticas"),t.qZA()(),t._UZ(6,"hr",3),t.qZA(),t._UZ(7,"br")(8,"br"),t.TgZ(9,"div",4)(10,"h1",5)(11,"b"),t._uU(12,"Eventos "),t.qZA()(),t._UZ(13,"hr",3),t.TgZ(14,"div",6)(15,"ion-card",7),t._UZ(16,"bar-chart",8),t.qZA(),t.TgZ(17,"ion-card",7),t._UZ(18,"radial-chart",8),t.qZA()()(),t.TgZ(19,"div",4)(20,"h1",5)(21,"b"),t._uU(22,"Oportunidades de Negocios "),t.qZA()(),t._UZ(23,"hr",3),t.TgZ(24,"div",6)(25,"ion-card",7),t._UZ(26,"bar-chart"),t.qZA(),t.TgZ(27,"ion-card",7),t._UZ(28,"radial-chart"),t.qZA()()(),t.TgZ(29,"div",4)(30,"h1",5)(31,"b"),t._uU(32,"Apoyos "),t.qZA()(),t._UZ(33,"hr",3),t.TgZ(34,"div",6)(35,"ion-card",7),t._UZ(36,"bar-chart"),t.qZA(),t.TgZ(37,"ion-card",7),t._UZ(38,"radial-chart"),t.qZA()()()()),2&o&&(t.Q6J("fullscreen",!0),t.xp6(16),t.Q6J("chartOptions",r.barchartEvento),t.xp6(2),t.Q6J("chartOptions",r.radialChartEvento))},dependencies:[l.PM,l.W2,l.sr,u.u,v.G]}),n})()}];let w=(()=>{var a;class n{}return(a=n).\u0275fac=function(o){return new(o||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[p.Bz.forChild(T),p.Bz]}),n})();var R=s(1094);let x=(()=>{var a;class n{}return(a=n).\u0275fac=function(o){return new(o||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[E.ez,y.u5,l.Pc,w,u.u,v.G,R.J]}),n})()}}]);